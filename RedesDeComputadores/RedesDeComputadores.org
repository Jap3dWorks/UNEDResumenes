#+title: RedesDeComputadores
#+author: Jordi Amposta Pérez
#+startup: latexpreview overview

* Introducción
** Transmisión de datos
*** Componentes
- Mensaje
- Emisor
- Receptor
- Medio
- Protocolo

*** Flujo de datos
- *Simplex*, comunicación unidireccional.
- *Semidúplex*, Bidireccional pero no al mismo tiempo.
- *Full-dúplex*, Bidireccional simultáneamente.

** Redes
*** Criterios a satisfacer 
- *Rendimiento*, tiempo de tránsito y de respuesta.
      - Se suelen usar dos métricas
            - Tasa de transferencia efectiva
            - Latencia
- *Fiabilidad*, exactitud de la entrega.
- *Seguridad*, protección frente accesos no autorizados.
        
*** Estructuras físicas
- *Tipo de conexión*.
      - *Punto a punto*, enlace dedicado entre dos puntos.
            - La mayoría usan cables.
      - *Multipunto*, varios dispositivos comparten el mismo enlace (y la capacidad del canal).
            - *compartida especialmente*, varios dispositivos pueden usar el enlace de forma simultánea.
            - *tiempo compartido*, Los usuarios comparten la línea por turnos.

- *Topología Física*.
      - Forma física en la que está diseñada la red.
      - *Topología en malla*, Cada dispositivo tiene un enlace punto a punto con cualquier otro dispositivo.
            - $N_{con} = \frac{n(n-1)}{2}$

      - *Topología en estrella*.
            - Cada dispositivo tiene un enlace punto a punto con el concentrador cental (hub).
                  - concentrador o conmutador (conmutador es mejor).
            - Más barata que la tolopología en malla.
            - Es una topología robusta.
                  - Ante cualquier error puede usarse el concentrador como monitor.
            - Muy usada en redes LAN.

      - *Topolgía de bus*.
            - Conexión multipunto.
            - Todos los dispositivos se conectan a un cable troncal(bus).
            - Los dispositivos se conectan usando sondas o latiguillos.
            - En el bus parte de la energía se disipa en forma de calor.
                  - Hay un límite en la longitud del cable troncal.
                  - Hay límite en la candidad de conexiones al bus.
            - Todos los dispositivos pueden leer el bus, no asegura la privacidad.
            - Es de instalación sencilla.
            - Es dificil aislar los fallos.
            - Es difici añadir nuevos dispositivos a la red una vez el bus se ha diseñado e instalado.
            - Un fallo o rotura en el bus puede desconectar toda la red.

      - *Topología en anillo*.
            - Cada dispositivo tiene una conexión punto a punto
              con los otros dos dispositivos que están a sus lados.
            - Cada dispositivo del anillo implementa un repetidor.
            - Es fácil detectar y aislar fallos.
            - Puede ser frágil si falla un nodo de la red.

*** Tipos Redes
**** LAN
- Local Area Network
- Conecta hosts de una única oficina, edifiio o campus.
- Cada host de la lan tiene un identificador (ipv4).
- Actualmente los hosts se conectan usando un conmutador (switch) (topología de estrella).
      - Antiguamente se usaba un bus.

**** WAN
- Wide Area Network
- Alcance geográfico más extenso, una ciudad, un estado, un país o incluso el mundo.
- Conecta dispositivos de conexión como conmutadores, enrutadores o modems.
- Dos tipos de WAN
      - *WAN punto a punto*, Conecta dos dispositivos de comunicación a través de un medio.
      - *WAN conmutada*.
            - Red con más de dos extremos.
            - Varias Wan punto a punto conectadas por conmutadores.
            - Vertebra la conmunicación actual.
- *interred* o *internet*, dos o más redes conectadas (WAN o LAN).
      - Internet son muchas redes conmutadas.

*** Internet
- Es la red de redes más notable, Internet con I.
- Es una colaboración de cientos de miles de redes interconectadas.
- Acceso a Internet
      - *Usando redes telefónicas*
            - Servicio marcación
            - Servicio DSL
      - *Usando cables de Red*
      - *Usando redes inalámbricas*
      - *Conexión directa a internet*

*** Historia de Internet
- *ARPANET*, 

*** Normas y Administración de Internet
- *Borrador* draft, documento de trabajo sin estatus.
- *RFC*, request for comments, bajo recomendación de las autoridades un borrador se puede publicar como rfc.
- Niveles de madurez de un RFC
      - *Norma Propuesta*
      - *Proyecto estandar*
      - *Estándar de Internet*
      - *Histórico*
      - *Experimental*
      - *Informativo*
- Niveles de requerimientos
      - *Requerido*
      - *Recomendado*
      - *Optativo*
      - *De uso limitado*
      - *No recomendado*

*** Administraión de Internet
- *ISOC*, Internet society, presta apoyo al proceso de creación de normas de internet.
- *IAB*, Junta de arquitectura de internet, Asesor técnico de la ISOC.
      - Supervisa el desarrollo de los protocolos ISP/IP.
- *IETF*, Grupo de trabajo de ingeniería de Internet, Internet Engineering Task Force.
      - Responsable de encontrar problemas operacionales y recomendar soluciones.
- *IRTF*, Internet Research Task Force.
      - Se centra en encontrar soluciones a largo plazo.

* Modelos de Red
** Principios de la arquitectura por niveles
- *Primer Principio*, Cada nivel debe realizar dos tareas opuestas.
  Por ejemplo escuchar en una direccióny hablar en la otra.
- *Segundo Principio*, Los dos objetos en cada nivel en ambos sitios deben ser idénticos.

** Protocolos TCP/IP
*** Capas y mensajes

| capa            | paquete                         | cabeceras                               | Direccionamiento                     |
|-----------------+---------------------------------+-----------------------------------------+--------------------------------------|
| Aplicación      | Mensaje                         | [mensaje]                               | Nombres                              |
| Transporte      | segmento / datagrama de usuario | [c.trasporte][mensaje]                  | Número de puerto                     |
| Red             | datagrama de red                | [c.red][c.transporte][mensaje]          | Direcciones lógicas (IP)             |
| Enlace de Datos | trama                           | [c.datos][c.red][c.transporte][mensaje] | Direcciones de nivel de enlace (MAC) |
| Físico          | bits                            | --                                      | --                                   |

*** Multiplexación y demultiplexación
- *Multiplexación*, Un protocolo de un nivel puede encapsular varios protocolos del nivel superior.
      - ftp y http se encapsulan en tcp.
- *Demultiplexación*, Un protocolo puede desencapsular y entregar paquetes a varios protocolos de nivel superior.
      - IP puede entregar a TCP y UDP

** Modelo OSI
- OSI es un modelo para entender y diseñar una arquitectura de red que sea flexible, robusta e interoperable.
- ISO es la organización, OSI es el modelo.
- Careció de éxito.
- Niveles
  | capa            | relativo tcp/ip |
  |-----------------+-----------------|
  | Aplicación      | Aplicación      |
  | Presentación    | Aplicación      |
  | Sesión          | Aplicación      |
  | Transporte      | Transporte      |
  | Red             | Red             |
  | Enlace de datos | Enlace de datos |
  | Físico          | Físico          |

* Nivel físico
- Paquete: bits
- Transporta los bits individuales del nivel de enlace.
      - Señales electromagnéticas.

** Datos y señales
- *Datos analógicos*, la información es continua.
- *Datos digitales*, la información es discreta.
- *Señal periódica*, completa una pauta dentro de un marco temporal mesurable.
- *Señal no periódica*, cambia sin exhibir un patrón o ciclo.

** Señales periódicas analógicas
*** Señal simple
- *señal simple*, una onda seno.
- *Amplitud pico*, valor absoluto de su mayor intensidad.
- *Periodo*, cantidad de segundos en completar un ciclo.
      - $T = \frac{1}{f}$
      - Unidad segundos $s$
- *Frecuencia*, número de periodos en 1 segundo.
      - $f = \frac{1}{T}$
      - Unidad Herzios $Hz$.
      - Si una señal no cambia nunca su frecuencia es $0 Hz$.
      - Si una señal cambia instantáneamente su frecuecnia es $\infty Hz$

- *Fase* o desplazamiento de fase, describe la posición de la forma de la onda en el tiempo 0.
      - Unidad: grados o radianes.

- *Longitud de onda*, vincula el periodo o frecuencia con *velocidad de propagación*.
      - La longitud de onda depende del medio (medios con mayor o menos velocidad de propagación).
      - $\lambda = c \cdot T = \frac{c}{f}$
            - $\lambda$, longitud de onda.
            - $c$, velocidad de propagación.
            - $T$, Periodo.
            - $f$, frecuencia.

*** Señal compuesta
- *Señal compuesta*, compuesta por múltiples onda seno.
- Según el analisis de Fourier, cualquier señal compuesta esuna combinación de ondas senoidales simples
  con diferentes frecuencias, amplitudes y fases.
- Una señal compuesta periódica puede descomponerse en un número finito de ondas seno
  con frecuencia discreta, números naturales.
- Una señal compuesta no periódica está compuesta de infinitas ondas seno simple,
  con frecuencias de valor real.
- *Frecuencia fundamental o Primer armónico*, onda seno simple con la misma frecuencia $f$ que la señal compuesta.
      - *segundo, tercer, ... armónico*: $a \cdot f\ | \ a \in \mathbb{N},\ a > 1$.
        
*** Ancho de banda
- *Ancho de banda*, Rango de frecuencias que contiene una señal compuesta.
      - $[f_{min}, f_{max}] \to B = f_{max} - f_{min} \ Hz$
            - $B$, el ancho de banda.
            - $f_{min}$, frecuencia mínima.
            - $f_{max}$, frecuencia máxima.

** Señales digitales
- Codificamos bits en niveles de una señal.
- Puede tener más de un nivel.
- *número bits por nivel* = $log_2{n}$
      - $n$, número de niveles.

*** Tasa de bits
- La mayoría de señales digitales no son periódicas.
- número de bits enviados en un segundo (bps).
- *Intévalo de bit*, velocidad propagación x duración del bit

*** Transmisión de señales digitales
- Una señal digital es una señal analógica compuesta por un ancho de banda infinito.
      - No es posible en la vida real.
- *Transmisión en banda base*
      - consiste en enviar una señal digital sin cambiar a una señal analógica.
            - Las ondas preservan la forma digital.
      - Requiere de un *canal paso-baja*.
            - Canal con un ancho de banda que comienza en 0.
            - Transmitir en *banda base* una señal digital que preserva su forma solo es posible con un
              ancho de banda infinito y muy grande.
      - $B=\frac{N}{2}$
            - $B$, ancho de banda analógico.
            - $N$, número de bits a enviar.
            - Se divide entre 2 porque en el peor caso sería 10101010...,
              como la señal seno en un periodo tiene un pico positivo y uno negativo,
              en un periodo puede transmitir dos bits como máximo.
      - Podemos añadir armónicos para mejorar la forma de la señal, en este caso.
      - $B = \frac{aN}{2}$.
            - $a$ es el armónico mayor que vamos a usar.

- *Transmisión en banda ancha*
      - Usando modulación (por ejemplo modificar la amplitud de la onda).
      - Implica cambiar la señal digital a analógica.
            - Permite el uso de un *canal paso-banda*.
                  - Canal con un ancho de banda que NO empieza en 0.
        
** Deterioro de la transmisión  
*** Atenuación
- Pérdida de energía (normalmente pérdida de poténcia).
      - Poténcia: $P=V \cdot I = \frac{E}{t} = I^2 \cdot R$
- Se usan *amplificadores* para compensar la pérdida de energía de las señales.
- *Decibelio*: mide las potencias relativas de dos señales.
      - $dB = 10\ log_{10}\frac{P_2}{P_1}$
            - positivo aumenta, negativo disminuye
      - $dB_f = \sum dB_i \quad : \quad i \in \mathbb{N}$
            - decibelio resultante es la suma de decibelios intermedios.

*** Distorsion
- Una señal cambia la forma de su onda.
- Ocurre en una señal compuesta cada señal componente tiene su propia propagación.

*** Ruido
- *Ruido térmico*, movimiento aleatorio de electrones en un cable.
- *Ruido inducido*, fuentes externas (motores, electrodomésticos).
- *Cruces de comunicaciones*, se debe al efecto de un cable roto.
- *Ruido de impulso*, un pico de potencia que viene de líneas de potencia, iluminación, etc.
- *Relación señal/ruido (SNR)*
      - Relación entre la señal y el ruido.
      - $SNR = \frac{\bar{P_s}}{\bar{P_r}}$
            - $\bar{P_s}$ potencia media de la señal.
            - $\bar{P_r}$ potencia media del ruido.
      - $SNR_{dB} = 10\ log_{10}SNR$
            - Se describe a menudo en decibelios.

** Límites de la velocidad de transmisión
- bps, la velocidad depende de:
      - Ancho de banda
      - Niveles de las señales que usamios
      - Calidad del canal (nivel de ruido)

*** Canal sin ruido, tasa de bits de Nyquist
- $Tasa\ bits = 2 \times B \times log_2L$
      - $Tasa\ bits$, bps.
      - $B$, ancho de banda.
      - $L$, niveles.
      - 2 porque un periodo puede aportar hasta dos bits.
- Incrementar demasiado los niveles de la señal disminuye la fiabilidad.

*** Canal con ruido: capacidad de Shannon
- $C = B \times log_2(1 + SNR)$
      - $C$, capacidad del canal en bps.
      - $B$, ancho de banda
- No importa los niveles $L$ que tengamos, No se puede conseguir una velocidad mayor que la capacidad del canal.

*** Usando ambos límites
- Con la capacidad de Shannon encontramos el límite superior.
- Con Nyquist definimos los niveles para la tasa deseada inferior al nivel superior.

** Rendimiento
- Términos para hablar de rendimiento

*** Ancho de Banda
- *Ancho banda en hercios*, Rango de frecuencias.
- *Ancho banda en bps*, número de bits por segundo de un canal.
- Mayor ancho de banda en hercios mayor ancho de banda en bps.

*** Tasa de transferencia relativa (throughput)
- bps reales de un canal, siempre es inferior al ancho de banda del canal.
- Se de a congestiones y otras causas.

*** Latencia
- Cuanto tarda un mensaje completo en llegar a su destinatario desde la salida del primer bit en la fuente.
- *Latencia = tiempo propagación + tiempo de transmisión + tiempo de cola + retardo de proceso*
- *Tiempo Propagación*
      - tiempo de viaje de un bit desde el origen al destino
      - *Tiempo propagación = distancia/velocidad de propagación*
- *Tiempo de transmisión*
      - *Tiempo de transmisión = tamaño del mensaje / ancho de banda (bps)*
- *Tiempo de cola*
      - Tiempo necesario para que cada dispositivo intermedio mantenga el mensaje en espera
        antes de que pueda ser procesado.

*** Producto ancho de banda - retardo
- número de bits que llenaría el canal.
- *2 x ancho de banda (Hz) x retardo*
      - Tamaño de cada ráfaga para aprovechar la capacidad del enlace.

*** Fluctuación del retardo (jitter)
- Los paquetes llegan con distintos retardos.
- Puede ser un problema para aplicaciones sensibles al tiempo.

** Codificación de línea
- Convertir datos digitales en señales digitales.
  
*** Características
- *Elemento señal frente a elemento de datos*
      - *Elemento dato*, la unidad más pequeña de información (bit).
      - *Elemento señal*, unidad más corta en el tiempo de una señal digital.
            - Un elemento señal representa el cambio.
      - Elementos dato son transportados elementos señal son portadores.
            - Tasa $r$, elementos dato transportados por una señal.
- *Tasa de datos frente a tasa de señales*
      - Tasa de datos son los bps
      - *Tasa de señales*, número de elementos señal enviados en 1 segundo (*baudios*).
            - También se conoce como tasa de pulsos, tasa de modulación o tasa de baudios.
      - Se busca incrementar tasa de datos y reducir tasa de señales.
      - $S = N/r$
            - $S$, Tasas de señales (baudios).
            - $N$, Tasa de datos (bps).
            - $r$. elementos dato por cada señal.
      - $S_{ave}=c \times N \times \frac{1}{r}\ baudios$
            - $S_{ave}$, señales promedio.
            - $c$, factor de caso, varia en cada caso.
            - Es el caso medio, las señal no tiene porque estar cambiando en cada pulso.
              si la señal no cambia no es una nueva señal.
      - $B_{min} = c \times N \times \frac{1}{r}$
            - $B_{min}$, ancho de banda de frecuencias mínimo
      - $N_{max} = \frac{Br}{c}$
            - Si se conoce el ancho de banda de frecuencias se puede determinar la tasa de bits máxima.
- *Variaciones de la línea base*.
      - Media de la potencia recibida.
      - Se identifican 1 o 0 comparando la señal con la línea base.
- *Componendes DC* (corriente continua)
      - Frecuencias bajas que aparecen con señales de voltaje constante.
      - Pueden ser problemáticos con algunos dispositivos.
- *Autosincronización*
      - Los intérvalos del emisor deben coincidir con los intérvalos del receptor.
- *Detección de errores incorporada*
      - capacidad de detección de errores en el codigo generado.
- *Inmunidad al ruido y las interferencias*
      - que el esquema de codificación es inmune al ruido y las interferencias.
- *Complejidad*
      - Un esquema complejo es más costoso de implementar.

*** Esquemas de codificación de línea
**** Unipolar
- Todos los niveles de señal se encuentran a un lado del eje del tiempo.
- *NRZ* (sin retorno a cero)
      - bit como 1 voltaje positivo
      - bit como 0 voltaje 0
      - 
         [[file:images/NRZUnipolar.png]]
**** Esquemas Polares
- Voltajes a ambos lados del eje del tiempo.
- *NRZ* (sin retorno a cero)
      - *NRZ-L*, voltaje determinal el valor del bit
      - *NRZ_I*, La inversión del voltaje determina el valor del bit
            - Si el voltaje cambia bit=1, 0 si no cambia.
      - 
        [[file:images/NRZBipolar.png]]
      - $S_{ave} = N/2\ bd$
      - Tienen problemas de componentes DC.
- *RZ* (con retorno a cero)
      - La señal cambia durante el bit
      - Evita problemas de componentes DC
      - Mejora la sincronización entre emisor y receptor
      - 
        [[file:images/RZPolar.png]]
- *Bifásica*
      - *Manchester*
            - RZ + NRZ-L
            - El bit se divide en 2 el voltaje cambia en la segunda mitad.
            - 
              [[file:images/ManchesterPolar.png]]
      - *Manchester Diferencial*
            - RZ + NRZ-I
            - El bit se divide en 2, al inicio del bit el voltaje se invierte si el bit es 0.
              no se invierte si el bit es 1.
            - 
              [[file:images/ManchesterDiferencialPolar.png]]
      - La transición a mitad del bit ofrece sincronización.
      - El ancho de banda mínimo es dos veces NRZ.

**** Esquemas Bipolares
- Voltajes de tres niveles positivo, negativo y cero.
- Sin componente DC
      - Alterna voltajes o lo mantiene a 0.
- Misma tasa de señales que NRZ
- *AMI* (bipolar con inversión de marca alternada)
      - Voltaje neutro es 0, voltajes alternados (+, -) es 1
      - Se suele usar en comunicaciones de larga distancia
      - 
        [[file:images/AmiBipolar.png]]
- *pseudoternaria*,
      - Voltaje neutro es 1, alternados (+,-) es 0
      - 
        [[file:images/PseudoternariaBipolar.png]]

**** Esquemas Multinivel
- Incrementar el número de bit por baudio
      - Se codifica un patrón de $m$ elementos de datos en un patrón de $n$ elementos señal.
      - $m$ elementos dato -> $2^m$ patrones.
- los esquemas *mBnL* indican *m* elementos binario (*B*) codificados en un patrón *n* elementos señal.
  *L* significa los niveles de la señal
- *2B1Q*, dos binario 1 cuaternario.
      - Codifica dos bits en una señal de dos cuatro niveles.
      - Tasa señal: $S = \frac{N}{4}$
      - No hay patrones de señal redundantes.
      - Se utiliza en la tecnología DSL.
- *8B6T*
      - Codifica 8 bits en 6 elementos señal de tres niveles.
      - $2^8 = 256, \quad 3^6=729$
            - $729 - 256 = 473$ elementos señal redundantes (sincronización, control de errores, equilibrio DC)
      - Los patrones de señal tienen peso 1 o 0 (suma de voltajes positivos y negativos).
            - Si dos patrones seguidos tienen peso 1, el segundo se invierte para que de peso -1.
            - Así se asegura el equilibrio DC.
      - Tasa media: $S_{ave} = 1/2 \times N \times 6/8$
      - $B_{ave} = 3N/4$
- *4D-PAM5*
      - Tetradimensional con modulación por amplitud de pulso de cinco niveles.
            - 4D porque los datos se envían en 4 cables.
      - 5 niveles de voltaje (-2,-1,0,1,2).
            - Nivel 0 para detección de errores.
            - Los otro cuatro nieveles crean algo similar a *8B4Q*.
      - Peor tasa de señal es $S_{bad} = N \times 4/8 \times N/2$.
      - $B_{ave} = N/8$.
      - LAN Gigabit usa esta técnica, datos a 1Gbps.
            - 125 MBaudios
      - Esquema con mucha redundancia
            - $2^8=256, \quad 4^5=1024$

**** Multitransmisión
- *MLT-3*
      - Transmisión multilínea, codificación de tres niveles.
      - codificiación diferencial
            - Si el siguiente bit es 0, no hay transición.
            - Si el siguiente bit es 1 y el nivel actual *no* es 0, el siguiente nivel es 0.
            - Si el siguiente bit es 1 y el nivel actual es 0, el siguiente nivel es opuesto al último nivel distinto de 0.
      - Reduce el ancho de banda (Hz)
      - $B_{ave} = N/3$

** Codificación por bloques
- Ofrece redundancia, mB/nB m bits en un bloque de n bits n>m.
- *4B/5B*, 4 binario 5 binario
      - Diseñado para usar en combinación con *NRZ-I* para evitar problemas de sincronización.
      - Se combina para que nunca aparezcan más de tres 0s consecutivos.
      - Los grupos que no codifican uno de los $2^4$ patrones se usan para control o no se usan.
      - los bits redundantes añaden un 20% más de baudios.
      - No soluciona el problema de componente DC.
- *8B/10B*, 8 binario 10 binario
      - Mayor capacidad de detección de errores que 4B/5B.
      - Combinación de 5B/6B y 3B/4B.
      - Para evitar largas secuencias de 0 o 1 se usa un controlador de disparidad.
            - sigue la pista del exceso de 0 sobre 1 (o viceversa).
            - Si los bits aumentan la disparidad en un bloque, estos se complementan.
      - $2^{10} - 2^8 = 768$ grupos redundantes para comprobar disparidad y detección de errores.

** Aleatorización  
- Se modifica *AMI* (no tiene DC) para evitar largas secuencias de 0s y ofrecer sincronización.
- Para comunicaciones de largas distancias.
- *B8ZS*
      - Bipolar con sustitución de 8 ceros.
      - Usado en Norteamerica.
      - 8 voltajes nivel 0 es sustituido por *000VB0VB*.
            - *V* significa violación,  que rompe la regla del voltaje opuesto.
            - *B* significa bipolar, sigue la regla del voltaje opuesto.
- *HDB3*
      - Bipolar de alta densidad con 3 ceros.
      - Usado fuera de Norteamerica.
      - 4 voltajes de nivel 0 se sustituye por *000V* o *B00V*.
            - Pulsos distintos de 0 antes de la sustitución es par -> *B00V*.
            - Pulsos distintos de 0 antes de la sustitución es inpar -> *000V*.
            - Se tienen en cuenta las sustituciones anteriores en el recuento de pulsos.

** Conversión analógica a digital  
- Técnicas para la codificación digital de señales analógicas (audio, fotos).

*** Modulación por codificación de pulsos (PCM)
**** Etapas
 1. Se *muestrea* la señal analógica.
        - Muestreo cada $T_s$ (intérvalo de muestreo o periodo)
        - $f_s = 1/T_s$ frecuencia de muestreo.
        - *Tasa de muestreo*
              - Nyquist dijo que la tasa de muestreo *almenos el doble* de frecuencia que la frecuencia más alta de la señal.
 2. Se *cuantifica* la señal muestreada.
        - El muestreo puede tener infinitos valores intermedios, no es viable. Pasos
              1. Se asume que la señal analógica original tiene amplitudes instantáneas entre $V{min}$ y $V_{max}$.
              2. Se divide el rango en L zonas de ancho $\Delta$.
                 $\Delta = \frac{V_{max} - V_{min}}{L}$
              3. Se asignan valores cuantificados de 0 a L-1 en el punto medio de cada zona.
              4. Se aproxima el valor de la amplitud de la muestra a los valores cuantificados.
        - Según el tipo de señal harán falta más niveles de cuantificación (En audio normalmente $L=256$).
        - Error de cuantificación proviene de encajar valores reales a valores aproximados.
              - El valor aproximado es el centro de cada zona de cuantificación, por tanto.
              - $-\Delta/2 \leq error \leq \Delta/2$
        - Para muchas aplicaciones es preferible cuantificación no uniformem, la altura $\Delta$ no es fija.
              - Detalle donde interesa
              - Reduce el $SRN_{dB}$
 3. Los valores cuantificados son *codificados* como flujos de bits.
        - Cada muestra se cambia a una palabra de un código de $n_b$ bits.
        - Número de bits a partir del número de niveles de la cuantificación.
        - $Tasa\ de\ bit =f_s \times n_b$
**** Recuperación de la señal
- Requiere un decodificador PCM.
      - Convierte palabras en pulsos.
      - Se filtra la señal para suavizarla (filtro paso-baja)

**** Ancho de banda PCM
- Ancho de banda mínimo para una señal digitalizada.
- $B_{min} = n_b \times B_{analog}$

**** Tasa de datos máxima de un canal
- L niveles fijos, canal de paso-baja con ancho de banda B Hz, muestreo $2 \times B$
- $N_{max} = 2 \times B \times log_2L\ bps$

**** Ancho de banda mínimo requerido
- ancho de banda mínimo para la tasa de datos anterior.
- $B_{min} = \frac{N}{2 \times log_2 L} Hz$

*** Modulación Delta
- Mas simple que PCM
- Cambio respecto a la muestra anterior.

**** Modulador
- flujo de bits que registra cambios. 1 si delta es positivo, 0 si delta es negativo (señal escalera).
- Un comparador compara la amplitud de la muestra actual con la señal escalera anterior.
      - Del resultado un modulador decide si el siguiente valor es 1 o 0.

**** Demodulador
- Toma la señal escalera y crea la señal analógica. Requiere un filtro para su suavizado.

****  DM Adaptativa
- Se pueden conseguir mejores resultados si $\Delta$ no es fija (según la amplitud de la señal).

**** Error cuantificación
- Menor que en PCM.

** Modos de transmisión
- Transmisión entre dispositivos
  
*** Transmisión paralela
- Grupos de $n$ bits al mismo tiempo.
- $n$ hilos para $n$ bits, en cada pulso de reloj se pueden mandar $n$ bits.
- Más rápido pero más caro

*** Transmisión en serie
- Un bit sigue a otro, un solo canal.
- Dentro del dispositivo se traduce a palabras.
  
**** Asíncrona
- La temporización no es importante.
- se añade un bit extra al principio de cada byte para avisar que empieza una transmisión.
- bits adicionales al final de quda byte para avisar de la parada.
- es barata y efectiva pero lenta.
  
**** Síncrona
- Tramas más largas que contienen múltiples bytes.
- Sin bits de inicio/parada.
- Se usa una trama especial de 1 y 0 para indicar vacío.
- Es rápido

**** Isócrona
- Garantiza que los datos llegan a una tasa fija.

** Digital a analógico
- $S = N/r$
  - $S$, Tasas de señales (baudios).
  - $N$, Tasa de datos (bps).
  - $r$. elementos dato por cada señal.

*** ASK (Amplitude Shift keying)
- Modulación por desplazamiento de amplitud.
- *BASK*, dos niveles de amplitud, 0 en amplitud 0, 1 con alguna amplitud.
- $B = (1+d) \times S$
      - $B$, ancho de banda Hz
      - $S$, tasa de señal (baudios)
      - $d$, [0,1] factor que depende del proceso de modulado y de filtrado.

*** FSK (Frecuency shift keying)
- Modulación por desplazamiento de frecuencia.
- *BFSK*, Se piensa como en dos frecuencias portadoras, una para 1 y la otra para 0.
- *MFSK*, fsk multinivel, hay más de dos intérvalos de frecuencias para mandar más de un bit por elemento señal.
      - 8 intérvalos pueden enviar 3 bits.
- $B = (1+d) \times S + 2\Delta_f$
      - $B$, Ancho de banda Hz
      - $S$, Tasa de señal (baudios)
      - $d$ [0,1] factor que depende del proceso de modulación.
      - $2\Delta_f$, Diferencia entre las dos frecuencias portadoras

*** PSK (Phase shift keying)
- Modulación por desplazamiento de fase.
- *BPSK*, en fase 1 en desfase 0 (0 y $\pi$).
- *QPSK*, versión en cuadratura de PSK.
  
*** QAM (Quadrature amplitude modulation)
- Se altera la fase y la amplitud.
- Combinación de ASK y PSK.
- 4-QAM, 16-QAM
      - Niveles de QAM
      - Cada nivel está asociado a un patrón digital.

** Analógico a analógico
*** AM (Amplitude modulation)
- Se altera la amplitud.
- $B_{AM} = 2B_{Orig}$
- Rango de frecuencias portadoras de radio AM [530, 1700]KHz.
- La frecuencia portadora de cada estación de radio AM está separada almenos 10KHz de las otras frecuencias AM.

*** FM (Frequency modulation)
- Se altera la modulación.
- $B_{FM}=2(1+ \beta)B_{Orig}$
      - $\beta$ depende de la técnica de modulación.
- Cada estación de radio tiene 200KHz.
      - Con separación entre estaciones de 200KHz.

*** PM (Phase modulation)
- Se altera la fase.
- $B_{PM}=2(1+\beta)B_{Orig}$

** Multiplexación
*** Multiplexación por división de frecuencia (FDM)
- Multiplexación de Señales analógicas que combina señales analógicas.
- Se modulan sobre distintas señales portadores, que se combinan en una sola señal compuesta.
- Multiplexación por grupos o jerarquía, hay etapas de multiplexación, como un grafo.
      - 12 canales $\to$ grupo
      - 5 grupos $\to$ supergrupo
      - 10 supergrupo $\to$ master grupo
      - 6 master grupo $\to$ grupo Jumbo

*** Multiplexación por división de longitud de onda (WDM)
- Multiplexación de Señales analógicas que combina señales ópticas.
- Combina diferentes haces de luz en una sola luz (prismas y fibra óptica).

*** Multiplexación por división de tiempo (TDM)
- Multiplexción digital, combina canales de tasa baja en uno de tasa alta.

- *TDM síncrona*
      - *Ranura*, bloque de datos en espacio de tiempo.
      - $T_{M} = T_{E}/n$
            - En la multiplexación de $n$ señales La *ranura* de salida es $n$ veces más corta que la ranura de entrada.
      - De las conexiones de entrada se coge una ranura de cada en rondas.
            - *Tramas*, ranuras de una ronda completa, una para cada emisor.
      - Si un emisor no emite puede darse ranuras vacías.
      - Multiplexación multinivel
            - Si hay diferentes tasas de datos. pueden multiplexarse los más bajos para que coincidan con los más altos.
      - Multiplexación multiples ranuras.
            - Consiste en demultiplexar un emisor (en 2 tasas más lentas) para rellenar las ranuras de un multiplexor posterior (que es más lento que el emisor).
      - Inserción de pulsos, relleno para las tasas más bajas y así asemejarlas a las tasas más altas.
      - *Sincronización de tramas*, A cada trama TDM se le añade unos bits al inicio que puede seguir un patrón de sincronización, ejemplo patrón 101.
            - [1|A3|B3|C3] [0|A2|B2|C2] [1|A1|B1|C1]

- *TDM estadística pot división de tiempo*
      - Solo cuando una entrada tiene datos que enviar se le asigna una ranura.
      - Requiere direccionamiento para identificar el receptor (unos bits).

** Espectro ensanchado
- Se intenta evitar las interferencias o escuchadores intrusos.
- Ancho de banda bastante mayor del necesario (redundancia).
- El proceso de ensanchado $B \to B_{ss}$ debe ser un proceso independiente de la creación de la señal.

*** Espectro ensanchado por salto de frecuencia  (FHSS)
- Se va saltando de frecuencia cada periodo de tiempo.

*** Espectro ensanchado por secuencia directa (DSSS)
- Es como que se añade mucho relleno de bits y patrones.

* Nivel Enlace de Datos
** Descripción
- Paquete: trama.
- Los enrutadores son los responsables de elegir los mejores enlaces entre redes.
      - Cuando un enrutador elige el siguiente enlace, el nivel de enlace es responsable de tomar el datagrama y moverlo a través del enlace.
      - La comunicación es de nodo a nodo.
- Hay control de errores.
- No hay control de la congestión normalmente.
- *Categoría de enlaces*
      - *Punto a punto*, Enlace dedicado (cable entre 2 dispositivos)
      - *broadcast (difusión amplia)*, Enlace compartido (aire)
- *Dos subniveles*
      - *DLC*, Control de enlace de datos
      - *MAC*, Control de enlace de medios (enlace de difusión)
- Dirección de enlace = dirección física = dirección MAC
      - ##:##:##:##:##:## (hexadecimal) 6 bytes.
      - Direcciones de enlace en la trama van cambiando a lo largo del recorrido del paquete.
      - Cada interfaz de cada host tiene una dirección de enlace única.
      - *Dirección unidifusión (unicast)*, destinado a una sola interfaz.
      - *Dirección multidifusión (multicast)*, uno a muchos con jurisdicción local.
      - *Dirección de broadcast*, se envía a todas las entidades de la red.
            - FF:FF:FF:FF:FF:FF
- *protocolo ARP*, Es de nivel de red, pero sirve para conocer las direcciones de enlace de otros dispositivos en la red.
      - Actualización de la tabla arp en el sistema.
      - Consulta *broadcast* respuestas *unicast*.

** DLC Control de enlace de datos
- Se ocupa del procedimiento para la comunicación entre dos nodos adyacentes.
      - Entramado, control de flujo y errores.
- *Protocolos orientados al caracter*
      - Datos como texto
      - Se colocan unas flags de 8 bits al inicio y final de la trama.
      - Transparencia a nivel byte, se escapan (\) los carácteres problematicos o confusos.
- *Protocolos orientados al bit*
      - Datos como bits
      - Se usan flags como delimitadores. 01111110
      - Transparencia bit, para evitar confusión con las flags.
            - 011111... -> 0111110... , se añade un 0
- *Buffer*, ayudan a regular el control de flujo.
      - presentes en emisor y receptor.

- Para control de errores
      - Método 1, Lan cableadas si la trama está corrompida se descarta silenciosamente.
      - Método 2, Si no está corrompida se devuelve un *ACK*, sino se descarta silenciosamente.
            - *ACK*, acuse de recibo, control de errores y de flujo.
                  - En enlace de datos solo existe en conexiones locales no cableadas.
                  - ACK MAC para comprobar que llegó el paquete sin cables.
                  - El ACK suele indicar la secuencia del paquete que espera recibir.
            - *Piggybacking*, En comunicación bidireccional se incluyen los acuse de recibo en los mensajes que circulan en ambas direcciones.
*** Protocolos
- *HDLC (High-level data link control)*, Control de enlace de datos de alto nivel
      - orientado a bit.
      - dos modos
            - *NRM* respuesta normal
                  - Estación primaria envía comandos, estación secundaria solo responde.
            - *ABM* asíncrono balanceado
                  - Las estaciones pueden fucionar como primarias o como secundarias.
      - Typos de tramas
            - *Tramas I*, de información
                  - | flag | Dirección | Control | Inf de usuario | FCS | FLAG |
            - *Tramas S*, de supervisión
                  - | flag | Dirección | Control |FCS | |
                  - Cuando piggybacking no es posible.
            - *Tramas U*, sin numeración
                  - | flag | Dirección | Control | Inf de Control | FCS | FLAG
            - FCS, campo de detección de errores de HDLC
- *PPP* (protocolo punto a punto)
      - El más frecuente
      - NO proporciona control de flujo
      - orientado al carácter
      - | flag | dirección | Control | Protocolo | Carga util (bytes) | FCS | FLAG |
            - campo dirección constante broadcast
      - En la carga útil puede llevar paquetes de otros protocolos PPP diseñados para el control.
            - *LCP*, protocolo de control de enlace.
                  - establecer mantener y configurar enlaces.
            - *AP*, protocolo de autentificación
                  - *PAP*, autentificación por contraseña
                  - *CHAP*, autentificación por reto.
                        - Ambos extremos tienen la contraseña pero no se comparte.
                        - aplican una función con la contraseña junto con unos pocos bits que se comparten y comparan resultados.
            - *NCP*
                  - *IPCP*, configura el enlace para transportar paquetes IP.
                        - Después ya pueden compartir paquetes.
                          
** MAC control de acceso al medio
- Protocolos de acceso multiple
      - Protocolos de acceso aleatorio
            - ALOHA
            - CSMA
            - CSMA/CD
            - CSMA/CA
      - Protocolos de acceso controlado
            - De reserva
            - Muestreo
            - Paso testigo
      - Protocolos de canalización
            - FDMA
            - TDMA
            - CDMA

*** Acceso aleatorio
**** Aloha
***** *Aloha puro*,
- Canal compartido
- Una estación emite en el canal cuando tiene una trama preparada.
- Cuando una estación envía una trama espera una respuesta del receptor.
- Si en un cierto tiempo no hay respuesta asume que la trama se ha perdido.
      - En este caso cada estación espera un tiempo determinado más un tiempo aleatorio aleatorio $T_B$ (Backoff time).
- Después de $K_{max}$ intentos fallidos la estación debe parar e intentarlo más tarde.
            - Periodo de espera es $2 \times T_p$.
            - $T_p$ tiempo de propagación máximo. Tiempo de enviar una trama entre las dos estaciones más separadas.
- *Periodo vulnerable* (existe posibilidad de colisión)
      - periodo vulnerable = $2 \times T_{fr}$
            - $T_{Fr}$, Tiempo de transmisión medio de una trama.
- *Tasa de transferencia efectiva o productividad*
      - $S = G \times e^{-2G}$
            - $G$, número medio de tramas generadas por el *sistema* (todas las estaciones) durante el tiempo de transmisión de una trama.
      - $S_{max} = 1/(2e) = 0.184$ cuando $G=1/2$

***** *Aloha con ranuras*
- Se divide el tiempo en ranuras de $T_{fr}$
- Las estaciones solo envían al comienzo de una ranura.
- Periodo vulnerable = $T_{fr}$
- *Productividad*
      - $S = G \times e^{-G}$
      - $S_{max} = 0.368$ cuando $G=1$

**** CSMA        
- Acceso múltiple por detección de portadora (CSMA).
- Se comprueba el medio antes de usarlo.
- El retardo de propagación puede generar colisión igualmente.
- *Periodo vulnerable* es $T_p$.
      - $T_p$, el tiempo de propagación.
- *Métodos de persistencia*
      - persistencia 1, si el medio está libre envía la trama inmediatamente.
            - Mayores colisiones.
      - No persistencia, Si el medio está libre envía inmediatamente.
            - Si no lo está espera un tiempo aleatorio y vuelve a probar.
      - Persistencia P, Se usa si el tiempo de una ranura es mayor al tiempo de propagación.
            1. Si la línea está libre con probabilidad $p$ envía la trama.
            2. Con probabilidad $1-p$ se espera a la siguiente ranura de tiempo.
                   - Si está libre se pasa a 1.
                   - Si está ocupada se espera un tiempo aleatorio.
**** CSMA/CD
- Acceso múltiple por detección de portadora y detección de colisiones (CSMA/CD).
- Se monitoriza el medio después de enviar una trama.
      - Si no se detecta otra trama la transmisión se realiza con éxito.
            - No se guarda la trama.
      - Si hay colisión (otra trama detectada) se envía luego de nuevo.
- Tamaño de la trama mínima.
      - $T_{fr} = 2 \times T_{p}$
            - $T_{fr}$, tiempo de transmisión (tiempo transmitiendo una trama)
            - $T_{p}$, tiempo de propagación
      - Trama mínima (bits) = $T_{fr} \times bps$
- *Procedimiento*
      - Transmisión detección continuo.
      - *Señal de interferencia*, de envía una señal corta en caso que otras estaciones no hayan detectado la colisión.
- *Nivel de energía*
      - Cero, canal libre.
      - normal, la estación está usando el canal.
      - anormal, hay una colisión y el nivel de energía es dos veces el normal.
- *Productividad*
      - Mayor que Aloha.

**** CSMA/CA
- Acceso múltiple por detección de portadora y evitación de colisiones.
- Se evitan las colisiones con
      - Espacio entre tramas (IFS), No se emite inmediatamente, se espera un periodo llamado IFS.
            - Así se comprueba que no se detecta el inicio de la transmisión de otra estación.
      - Ventana de contención, Cantidad de tiempo dividido en ranuras.
            - La estación elige un número de ranuras aleatorio como su tiempo de espera.
            - El número de ranuras se duplica cada vez que no se puede emitir.
            - 
      - Confirmaciones
            - Confirmación por parte del receptor y temporizadores.
- Linea de tiempo de intercambio de trama
      1. Se detecta el medio
             - Persistencia con retroceso hasta que el canal está inactivo.
             - Espera *DIFS* (espacio interframe), evía una trama de control *RTS* (solicitud de envío).
                   - Se incluye el NAV, que indica el tiempo que se necesitará ocupar el medio.
      2. La estación destino tras recibir el *RTS* espera *SIFS* (short interframe space) y envía *CTS* (clear to send, permiso para enviar).
      3. La estación origen tras recibir el CTS espera SIFS y retrasmite.
      4. El destino después de esperar SIFS envía un ACK.

- Si no se recibe un CTS se asume que ha habido colisión y se vuelve a intentar.         

# TODO gráfico pag 308  

*** Acceso Controlado
- Las estaciones consultan unas a otras quien puede enviar.

**** Reserva
- Tiempo dividido en intérvalos
- Trama de reserva, contiene $n$ ranuras en un sistema de $n$ estaciones.
      - Si una estación necesita enviar datos hay un 1 en su miniranura.
      - Las estaciones que han hecho reserva pueden enviar sus tramas depués de la trama de reserva.

**** Muestreo
- Topologías con una estación primaria.
- Dispositivo primario controla el enlace.
- *Selección*
      - El nodo primario debe alertar a el nodo secundario de su deseo de transmitir (trama de selección SEL).
      - El nodo secundario debe confirmar que está listo.
  
- *Muestreo*
      - El nodo primario pregunta (muestrea) a los secundario si tienen algo para enviar.
      - El nodo secundario responde con una trama *NAK* si no tiene nada que enviar.
      - Si la respuesta es positiva, una trama de datos, el primario devuelve una trama *ACK* al noso secundario.

**** Paso de testigo
- Organización de anillo lógico.
- El derecho a usar el canal (testigo) es concedido por el nodo predecesor.
      - El *Testigo* es un paquete especial que cricula a través del anillo.
- Es necesaria una gestión del testigo para evitar que se destruya o un nodo lo acapare demasiado tiempo.
- Algunas topologías en anillo
      - Anillo físico
            - conexiones físicas en anillo.
            - si falla un nodo cae el sistema.
      - Anillo dual
            - Segundo anillo en dirección inversa por si fallan conexiones.
            - Cada nodo necesita dos puertos.
      - Anillo en bus.
            - La conexión física es un bus, pero el comportamiento lógico es en anillo.
      - Anillo en estrella.
            - Topología física es en estrella.
            - Un concentrador central (o conmutador).
            - Los nodos se conectan al concentrador con dos cables (entrada/salida).

*** Canalización
- Método de acceso múltiple.
- El ancho disponible del enlace se comparte.

**** FDMA, Acceso múltiple por división de la frecuencia
- Ancho de banda disponible se divide en bandas de frecuencia separadas por bandas de guarda.
- Cada estación tiene asignada una banda.
      - Aplican un filtro paso-banda para confinar la frecuencia.
- El nivel de enlace determina a su nivel físico el ancho de banda, no hace falta un multiplexor físico de señales.
      - Las señales se combinan en el canal.

**** TDMA, Acceso múltiple por división de tiempo
- Cada estación tiene asignada una ranura de tiempo.
- Es dificil conseguir la sincronización entre diferentes estaciones.
- *Tiempo de guarda*, tiempo que se inserta para compensar los retardos de la propagación.
- El nivel de enlace determina la ranura de tiempo al nivel físico, no hay un multiplexor físico.

**** CDMA, Acceso múltiple por división de código
- Un solo canal transporta todas las transmisiones y todas las estaciones pueden enviar al mismo tiempo.
- Idea
      - Cada estación tiene un código $c_i$.
      - si $a \neq b\ \to c_a \times c_b = 0$
      - $c_a \times c_a = n$
      - $d_i$ son los datos de la estación $i$
      - Cada estación $i$ emite $d_i \times c_i$
      - El canal común $C_m = \sum_{i=1}^n d_i \times c_i$
      - Si el equipo $a$ quiere los datos de $b$ hace $C_m \times c_b = nd_b$
- Chips
      - secuencia de números que forman $c_i$.
      - Ejemplo
            - [+1 +1 +1 +1]
            - [+1 -1 +1 -1]
            - [+1 +1 -1 -1]
            - [+1 -1 -1 +1]

      - Secuencias *Ortogonales*
            - $N$ elementos donde $N$ es el número de estaciones.
            - $a \cdot [x_1 \dots x_n] = [ax_1 \dots ax_n]$
            - $c_a \cdot c_b = c_a_1 \cdot c_b_1 + \dots + c_a_n \cdot c_b_n$
            - $c_a + c_b = [c_a_1 + c_b_1\ \cdots\ c_a_n + c_b_n]$
- Datos a transmitir
      - $0 \to -1$
      - $1 \to 1$
      - inactividad $\to 0$
      - Dato enviado $d_i \times c_i$

- Generación de secuencias
      - *Tabla Walsh*,
        # TODO grafico pag 265
      - $N=2^m$ número de secuencias es potencia de 2.

** Lan Cableadas: Ethernet
*** Protocolo ETHERNET
- Evolución Ethernet
      - *Standard Ethernet* 10 Mbps
      - *Fast Ethernet* 100 Mbps
      - *Gigabit Ethernet* 1Gbps
      - *10 Gigabit Ethernet* 10 Gbps

*** Ethernet Stándar, 10 Mbps
**** Características
- Servicio sin conexión e inestable
- *Formato de trama* (64 bytes - 1518 bytes) (preámbulo/delimitador + 1 Byte)
      - *Preámbulo* (7 Bytes)
            - Cabecera de nivel físico
      - *Delimitador de comienzo de trama (SDF)* (1 Byte)
      - *Dirección destino* (6 Bytes)
            - Dirección de nivel de enlace (MAC)
      - *Dirección origen* (6 Bytes)
            - (MAC)
      - *Tipo* (2 Bytes)
            - IP, ARP o OSPF
      - *Datos* (46 Bytes - 1500 Bytes)
            - Si es necesario se añade relleno.
            - Contiene datos de protocolos superiores.
      - *CRC* (4 Bytes), campo para detectar erroes.
- *Longitud de trama*
      - Requerimiento para CSMA/CD con persistencia 1.
      - Evita que una estación monopolize el medio.
      - Antes la memoria era cara.

**** *Direccionamiento*
      - *NIC*, network interface card, tarjeta de red.
            - Cada nodo tiene almenos una.
            - Proporcionala MAC.
      - MAC -> ##:##:##:##:##:##
            - 6 bytes en hexadecimal
            - Se transmiten byte a byte de izquierda a derecha.
            - El bit menos significativo de cada byte se envía antes.
      - Unicast
            - #######0:########:...:########
      - Multicast
            - #######1:########:...:########
            - Mantienen la trama los miembros del grupo.
      - Broadcast
            - FF:FF:FF:FF:FF:FF
            - Todos los miembros reciben y mantienen la trama.
**** Acceso y eficacia              
- Acceso CSMA/CD con Persistencia 1.
- Eficacia = $1 / (1 + 6.4 \times a)$
      - $a$, Tramas que caben en el medio.
      - $a=$ (retardo propagación)/(retardo de tranmisión)
        
**** *Implementaciones*
      - 10Base5
            - Coaxial grueso
            - 500m longitud
            - Codificación Manchester
            - Topología BUS
            - Semiduplex
      - 10Base2
            - Coaxial fino
            - 185m longitud
            - Codificación Manchester
            - Topología BUS
            - Semiduplex
      - 10Base-T
            - 2 UTP, cable de par trenzado
                  - Un trenzado para enviar y otro para recibir.
            - 100m longitud
            - Codificación Manchester
            - Topología en estrella con un concentrador.
            - Fullduplex
      - 10Base-F
            - 2 Fibra
                  - Uno enviar el otro recibir.
            - 2000m longitud
            - Manchester
            - Topología en estrella con un concentrador.
            - Fullduplex

*** Ethernet rápida (100 MBPS) (fast ethernet)
- Compatible con ethernet estandar
      - Mismo formato de trama
      - Direcciones MAC 48 bit.

**** Método de acceso        
- *Método acceso*
      - CSMA/CD
      - 1a Solucion para colisiones
            - Usa HUB y topología estrella
            - Tamaño máximo de la red 250m
      - 2a solución para colisiones
            - Conmutador con un buffer
            - Topología estrella
            - Conexión fullduplex a cada host
            - No es necesario CSMA/CD (conexiones punto a punto).
      - Autonegociación
            - Cierto margen para establecer las condiciones de una conexión.
            - Permite a dispositivos incompatibles conectarse.
            - Permite a un dispositivo tener múltiples capacidades.
            - Permite a una estación comprobar las capacidades del concentrador.
**** Nivel físico
- Topología estrella con concentrasor/conmutador.
- Implementaciones
      - 100Base-TX
            - 2 UTP categoría 5 (par trenzado)
            - 100m longitud
            - Codificación 4B/5B + MLT-3
      - 100Base-FX
            - 2 Fibra
            - 2000m longitud
            - Codificación 4B/5B + NRZ-I
      - 100Base-T4
            - 4 UTP (par trenzado)
            - 100m longitud
            - Codificación 3 8B6T
            - Para edificios que ya tenían cable de par para voz.

*** Ethernet Gigabit
- IEEE Estándar 802.3z
- Compatible con Ethernet estándar y Fast Ethernet
- MAC de 48 bit.
- Mismo formato de trama.
- Autonegociación como en Fast Ethernet.

**** Subnivel MAC
- Modo Duplex
- Semiduplex es raro
      - CSMA/CD
      - Métodos para detectar colisiones
            - Tradicional, Se reduce la longitud de la red.
            - Extensión de portadora.
                  - Trama mínima más grande
            - Ráfaga de tramas
                  - Se envían multiple tramas

**** Nivel físico                    
- Topología estrella con concentrador/conmutador.
- Varias topologías estrella conectables.
- Implementaciones
      - 1000Base-SX
            - 2 Fibra S-W
            - 500m longitud
            - Codificación 8B/10B + NRZ
      - 1000Base-LX
            - 2 Fibra L-W
            - 5000m longitud
            - Codificación 8B/10B + NRZ
      - 1000Base-CX
            - 2 STP
            - 25m longitud
            - Codificación 8B/10B + NRZ
      - 1000Base-T
            - 4 UTP
            - 100m longitud
            - Codificación 4D-PAM5

*** Ethernet 10 Gigabit
- IEEE estándar 802.3ae
- Válido para LAN y MAN (área metropolitana).

**** Implementación
- Sólo modo Duplex
- Implementaciones
      - 10GBase-SR
            - 2 Fibra 850 nm
            - 300m longitud
            - Codificación 64B/66B
      - 10GBase-LR
            - 2 Fibra 1310nm
            - 10km longitud
            - Codificación 54B/66B
      - 10GBase-EW
            - 2 Fibra 1350nm
            - 40Km longitud
            - SONET
      - 10Base-X4
            - 2 Fibra 1310nm
            - 300m to 10Km
            - 8B10B

** Lan inalámbrica
- El medio es el aire y se transmite en modo difusión.

*** Características
- *Atenuación*, la señal electromagnética se dispersa en todas las direcciones.
- *Interferencia*, se pueden recibir señales más allá del remitente previsto.
- *Propagación multitrayecto*, recibir más de una señal del mismo emisor por rebotes de las señales.
- *ERROR*, menor SNR,  mayor ruido que en redes cableadas.

*** Control de acceso
- CSMA/CA

*** Proyecto IEEE 802.11
**** Arquitectura
- BSS, Conjunto de servicios básicos
      - Red ad hoc, sin access point, solo nodos.
      - Red con infraestructura, con access point.
- ESS, Conjunto de servicios extendido.
      - Dos o más BSS con AP (access point).
      - Se conectan a un sistema de distribución que suele ser una LAN con cable.
- Tipos de estaciones
      - Estación con *movilidad sin transición*
            - Siempre dentro de una BSS
      - Estación con *movilidad con transición BSS*
            - Puede moverse entre BSS's pero dentro de un ESS
      - Estadión con *movilidad con transición ESS*
            - Se puede mover de un ESS a otro ESS.
      - IEEE 802.11 no garantiza la conexión continua durante el movimiento.

**** Subnivel MAC
- Dos subniveles MAC
      - DCF, función de coordinación distribuida.
            - Control de acceso CSMA/CA
      - PFC, función de coordinación puntual.
            - Método opcional para redes con infraestructura.
            - El AP hace un muestreo de la red.
                  - Las estaciones envian cualquier dato que tengan durante el muestreo.
            - *PIFS* (PCF IFS), es más corto que el DIFS, por ello el muestreo del PFC tiene mayor prioridad que el DCF de las estaciones.
- Fragmentación, el protocolo recomienda dividir tramas grandes en otras más pequeñas.
- Formato de trama
      - *FC* (2Bytes), tipo de trama junto con información de control, subcampos:
            - *versión* (2bit)
            - *tipo* (2bit)
                  - Gestión (00)
                  - Control (01)
                  - Datos   (10)
            - *subtipo* (4bit)
                  - Subtipo Control
                        - 1011, petición RTS
                        - 1100, permiso para enviar CTS
                        - 1101, ACK
            - *A DS* (1 bit), configura el [[id:10cf8465-2adf-4984-94b6-5ca2841c1efb][direccionamiento]].
                  - La trama va hacia un AP (access point).
            - *De DS* (1 bit), configura el [[id:10cf8465-2adf-4984-94b6-5ca2841c1efb][direccionamiento]].
                  - La trama viene de un AP (access point).
            - *más frag*. (1 bit), más fragmentos
            - *reintenta* (1 bit), trama retransmitida
            - *gestión de potencia* (1 bit), significa que la estación está en modo gestión de potencia.
            - *más datos* (1 bit), la estación tiene más datos para enviar.
            - *WEB* (1 bit), cifrado implementado
            - *Rsvd* (1 bit), reservado
      - *D* (2Bytes), Duración de la transmisión para fijar el *NAV*.
      - *Dirección 1* (6Bytes)
      - *Dirección 2* (6Bytes)
      - *Dirección 3* (6Bytes)
      - *SC* (2Bytes)
      - *Dirección 4* (6Bytes)
      - *Cuerpo de la trama* (0-2312Bytes), depende del tipo
      - *FCS* (4Bytes) CRC-32

**** Mecanismo de direccionamiento
:PROPERTIES:
:ID:       10cf8465-2adf-4984-94b6-5ca2841c1efb
:END:
| A DS | De DS | Dirección 1 | Dirección 2 | Dirección 3 | Dirección 4 |
|------+-------+-------------+-------------+-------------+-------------|
|    0 |     0 | Destino     | Origen      | ID de BSSS  | N/A         |
|    0 |     1 | Destino     | AP emisor   | Origen      | N/A         |
|    1 |     0 | AP receptor | Origen      | Destino     | N/A         |
|    1 |     1 | AP receptor | AP emisor   | Destino     | Origen      |

- *A DS=0. De DS=0*, No viene y no va a ningún sistema de distribución.
- *A DS=0. De DS=1*, La trama viene de un sistema de distribución y va hacia una estación.
- *A DS=1. De DS=0*, La trama va un AP (sistema de distribución) desde una estación.
- *A DS=1. De DS=1*, La trama va de AP a un AP.

- Problemas de la estación expuesta
      - Una estación es demasiado conservadora y no usa el canal por pensar que puede generar colisiones.
      - B -emite-> A, A -responde-> B.
      - C no ve a B pero ve la respuesta de A.
      - C quiere comunicarse con D pero piensa que puede interferir con A y no usa el canal.

**** Nivel físico
- *IEEE 802.11 FHSS*
      - Banda 2.4 - 2.4835 GHz
      - Modulación FSK
      - Tasa 1 y 2 Mbps
- *IEEE 802.11 DSSS*
      - Banda 2.4 - 2.4835 GHz
      - Modulación PSK
      - Tasa 1 y 2 Mbps
- *IEEE 802.11 por infrarojos*
      - Banda infrarojo
      - Modulación PPM (modulación por posición de pulsos)
      - Tasa 1 y 2 Mbps
- *IEEE 802.11a OFDM* (multiplexación por división de frecuencias ortogonal)
      - 5.725 - 5.850 GHz
      - Modulación PSK o QAM
      - Tasa 6 a 54 Mbps
- *IEEE 802.11b DSSS*
      - 2.4 - 2.4835 GHz
      - Modulación PSK
      - Tasa 5.5 y 11 Mbps
- *IEEE 802.11g OFDM*
      - 2.4 - 2.4835 GHz
      - Tasa 22 y 54 Mbps
- *IEEE 802.11n OFDM*
      - 5.725 - 5.850 GHz
      - Tasa 600 Mbps

*** Bluetooth
- red ad hoc
- Un dispositivo puede compartir la conexión a internet con el resto de la red.

**** Arquitectura
- *Picorredes*, red bluetooth.
      - Hasta 8 estaciones, una de ellas es la primaria.
      - Estaciones secundarias tienen dos estados
            - Estado estacionado, no contabiliza en el máximo de dispositivos y no participa en la red.
            - Estado activo. Perticipa en la red.
- *Red dispersa*
      - Una estación secundaria en una picored puede ser primaria en otra picored.
- Los dipositivo tiene una radio de corto alzance
      - Tasa actual 1Mbps
      - 2.4GHz ancho de banda.
            - Puede interferir con IEEE 802.11b

**** Niveles de Bluethoot
# TODO pag 318

** Dispositivos de conexión y LAN virtuales
*** Dispositivos de conexión
**** Concentradores
- Funciona solo a nivel físico
- Repite las señales que se atenuan con la distancia
- No tiene capacidad de filtrado

**** Conmutador del nivel de enlace
- Opera a nivel físico y de enlace.
- Puede comprobar las direcciones MAC contenidas en las tramas y filtrar el mensaje.
- *Conmutadores transparentes*
      - Las estaciones desconocen la existencia del conmutador
      - Según la IEEE 802.1d debe cumplir
            - Tramas deben ser enviadas de una estación a otra.
            - Tabla de encapsulamiento se construye automaticamente mediante aprendizaje de los movimientos de tramas en la red.
            - Evitarse los bucles.
- *Aprendizaje*
      - El conmutador construye una tabla que relaciona dirección MAC con el puerto conectado de entrada.
      - Usa la dirección de origen de una trama para rellenar la entrada del puerto conectado con la dirección conectada.
- *Problema de los bucles*
      - Si hay más de un comutador conectado a la red puede repetirse las tramas en la red.
      - Se suele usar más de un conmutador para asegurar redundancia por si uno falla.
- *Algoritmo del árbol de expansión*
      - Así los conmutadores crean topología sin ciclos.
            - Pueden evitar el problema de los bucles.
      - El conmutador con el id mínimo actua como raiz
            - Los conmutadores tienen un id.
- Eliminación de colisiones
- Conexión de dispositivos heterogéneos.
      - Dispositivos con diferentes niveles físicos.

**** Routers (enrutadores)
- Nivel físico, de enlace de datos y de red.
      - repite la señal, compruena la dirección física y la dirección de red.
- Tiene dirección física y lógica (IP) para cada una de sus interfaces.
- Actua sobre los paquetes con dirección física de destino igual a la dirección de la interfaz que lo recibe.
- Cambia las direcciones de nivel de enlace (física) cuando reenvia el paquete.

*** Lan virtuales
- Red LAN configurada por software
      - No tienen porque pertenecer físicamente a la misma red LAN.
- Permite la agrupación de estaciones conectadas a conmutadores distintos en una VLAN.

**** Pertenencia
- Características que pueden usarse para agrupar estaciones en VLAN.
- *Números de puertos*
      - Números de puertos de un conmutador.
- *Direcciones MAC*
      - La dirección MAC de 48 bit como caractrística de pertenencia.
- *Direccións IP*
      - direcciones IP de 32 bit.
- *Direcciones multicast IP*
- *Combinación*
      - El administrador puede elegir una o más características para definir la pertenencia.

**** Configuración
- *Configuración manual*, El administrador de redes usa el software VLAN para asignar estaciones.
- *Configuración automática*, Según los criterios definidos por el administrador.
- *Configuración semiautomática*, combinación de ambas.

**** Comunicación entre conmutadores
- El conmutador debe conocer que estación pertenece a cada VLAN.
- También debe conocer la pertenencia de estaciones conectadas a otros conmutadores.
- métodos
      - *Mantenimiento de la tabla*, los conmutadores se envían las tablas entre si para actualizarlas.
      - *Marcado de trama*, Cabecera extra a la trama MAC para definir su VLAN destino.
      - *TDM, multiplexación por división en el tiempo*
            - Destino VLAN1 en la celda1, VLAN2 en la celda2, etc

- *IEEE 802.1Q*
  - Indica el formato del marcado de trama.

**** Ventajas
- Reduce costes de migración de estaciones.
- Creación de grupos de trabajo virtuales.
- Seguridad, los miembros de una VLAN gozan de cierta privacidad.

* Nivel de Red
- *Paquete: datagrama de red.*
- Responsable de la conexión lógica entre el dispositivo origen y destino.
- Incluye el protocolo principal IP.
      - IP es un protocolo sin conexión.
      - Sin control de flujo.
      - Sin control de errores.

- Se involucra en el host origen, host destino y todos los enrutadores del camino.

** Servicios
- *Paquetizado*, encapsular la carga útil de los niveles superiores.
      - Añade encabezado con las direcciones (ip) de origen y destino.
- *Enrutamiento y reenvio*
      - Enrutar desde el origen al destino, hay más de un camino.
            - Encontrar el mejor camino
      - Reenvio, el enrutador usa su tabla de enrutamiento para redirigir el paquete hacia el siguiente paso.
            - Cambia direcciones físicas (siguiente paso), puede cambiar la ip origen (recibir las respuestas), etc.
- *Control de erroes*, poco más que un CRC
- *Control de flujo*, no implementa directamente ningún control.
- *Control de la congestión*, Algunos enrutadores pueden dejar caer datagramas.
- *Calidad del servicio*
- *Seguridad*, Es una preocupación actualmente.

** Conmutación de paquetes
- Conexión puerto entrada y puerto de salida.
- Mensaje de nivel superior se divide en paquetes manejables.
      - El destino espera que lleguen todos los paquetes pertenencientes al mensaje antes de pasarlo al nivel superior.

*** Acercamiento de datagrama: servicio sin conexión
- Al iniccio cada paquete es independiente.
      - Pueden viajar por caminos distintos cada paquete.

*** Acercamiento del circuito virtual: servicio orientado a la conexión
- Existe una relación entre todos los paquetes de un mensaje.
- Se establece el camino antes del primer envío.
      - *Identificador del circuito virtual*, El paquete contiene una etiqueta de sentido de flujo (que camino debe seguir).
- tres fases
      - Configuración.
      - Transferencia de datos.
      - Desmontaje.

**** Fase de configuración
- El enrutador crea una entrada para un circuito virtual. Tabla de reenvio.
  | entrante |          | saliente |          |
  | puerto   | eitqueta | puerto   | etiqueta |
  | ..       | ..       | ..       | ..       |

- *paquete de petición*
      1. La fuente envía un paquete de solicitud al enrutador.
             - Lleva las direcciones de origen y destino.
      2. El enrutador conoce el puerto de salida
             - asigna una etiqueta y rellena su tabla de circuito virtual.
      3. Se repite el proceso en los enrutadores del camino
      4. El destino recibe el paquete y asigna una etiqueta de enrtada a la conexión.

- *Paquete de reconocimiento*
      1. El destino responde con la etiqueta que ha asignado.
             - El enrutador conectado a el destino usará esta etiqueta para rellenar su tabla de conexión y saber que puerto de salida corresponde a esta conexión.
      2. Los enrutadores comparten su etiqueta de entrada de la conexión (eligida anteriormente) con el enrutador que le precede.
             - Así los enrutadores podrán identificar cada uno su entrada en la tabla y ayudar a los enrutadores del camino a que encuentren la entrada correcta.
      3. El origen también recibe la etiqueta de su enrutador.
      4. Las fuentes usan la etiqueta de salida para los paquetes que se envían al destino y la etiqueta entrada para los que vuelven al origen.

**** Fase de transferencia de datos
- Desde el origen al destino con su etiqueta.
      - cada enrutador usa la etiqueta de entrada y la cambia por la de salida.
            - La etiqueta salida de un enrutador es la etiqueta de entrada del siguiente en el circuito virtual.
      - Este paso se repite hasta llegar al destino.

**** Fase de desmontaje
- Cuando acaba el proceso desde el origen se envía un paquete especial para borrar las entradas de la tabla de reenvio.

** Rendimiento en el nivel de red
*** Retardo
- *Retardo de transmisión*
      - $Retardo_{tr} = L_{paquete}/ V_{tr}$
            - $L_{paquete}$, longitud del paquete.
            - $V_{tr}$, velocidad de transmisión.
- *Retardo de propagación*
      - $Retardo_{pg} = D/V_{pg}$
            - $D$, distancia
            - $V_{pg}$, velocidad de propagación
- *Retardo de procesamiento*
      - Tiempo que necesita un enrutador o host para manjejar el datagrama.
            - Eliminar cabecera, reenviar, detección de errores.
      - $Retardo_{pr}$ = Tiempo necesario para procesar un paquete
- *Retardo de cola*
      - Tiempo que un paquete espera en uno de los buffers del enrutador.
            - Una cola por puerto.
      - $Retardo_{qu}$ = Tiempo que un paquete espera en las colas de entrada y salida.
- *Retardo total*
      - $Retardo_{tt} = (n + 1)(Retardo_{tr} + Retardo_{pg} + Retardo_{pr}) + n(Retardo_{qu})$
            - $n$, el número de enrutadores.
            - $(n+1)$, número de enlaces.

*** Tasa de transferencia efectiva
- número de bits que pasan por un punto de la red en un segundo.
- Cada tramo entre enlaces puede tener diferentes velocidades.
      - La tasa de transferencia es la menor de todos los tramos de la red.
- $T_{tr} = min(T_{tr(1)}, ..., T_{tr(n)})$
- Hay que tener en cuenta que pueden haber varios flujos entre dos enrutadores y la velocidad se reparte.

*** Pérdida de paquetes
- El enrutador puede tener sus buffers de entrada completos.

*** Control de la congestión
- *Control de la congestión en bucle abierto (prevención)*
      - *Política de retransmisión*, Esperar si es necesario.
      - *Política de ventanas*, ventana de repetición selectiva.
      - *Política de reconocimiento*, por ejemplo el acude de recibo de N paquetes a la vez.
      - *Política de descartes*, descartar paquetes menos sensibles (en streaming).
      - *Política de admisión*, negarse a establecer la conexión de circuito virtual si hay riesgo de congestión.

- *Control de la congestión en bucle cerrado (eliminicación)*
      - *Contrapresión*, El nodo congestionado corta el flujo con el nodo o los nodos inmediatamente anteriores.
            - Provoca que los nodos inmediatamente anteriores empiecen a congestionarse y reducen el tráfico.
            - Solo impementable en circuitos virtuales.
      - *Paquete de estrangulamiento*, Paquete enviado desde un nodo al origen para avisar (ICMP).
      - *Señalización implícita*, La fuente supone que hay congestión por algunos síntomas.
            - La fuente reduce la velocidad de transmisión.
      - *Señalización explícita*, Una señal que se incluye en los paquetes notifica a la fuente.
            - No es un paquete especial como en el *estrangulamiento*.

** Direcciones IPV4
- IPV4 32bits $\to 2^{32}$ direcciones.
- *Notaciones*
      - binario: 10000000 00001011 00000011 00011111
      - punto decinal: 128.11.3.11
      - hexadecimal: 80 0B 03 1F

*** Jerarquía en el direccionamiento
| 32 bits |        |
|---------+--------|
| Prefijo | sufijo |

- *Prefijo*, define la red.
- *Sufijo*, define una conexión en la red. 

*** Direccionamiento con clase
- Obsoleto.
- Los primeros bits definen la clase

| Clase | Prefijos     | bits de clase | Primer byte |
|-------+--------------+---------------+-------------|
| A     | n = 8 bits   |             0 | 0 a 127     |
| B     | n = 16 bits  |            10 | 128 a 191   |
| C     | n = 24 bits  |           110 | 102 a 223   |
| D     | No se aplica |          1111 | 224 a 239   |
| E     | No se aplica |          1111 | 240 a 255   |

- *Agotamiento de direcciones*
      - Pocas direcciones para dar servicio a todo el mundo.
      - La clase C soporta pocas estaciones conectadas.

*** Direccionamiento sin clase
- *Prefijo longitud: notación barra* (CIDR)
      - Byte | Byte | Byte | Byte / n
      - n, longitud del prefijo.
            - de izquierda a derecha
      - $2^{32-N}$ direcciones cada red
      - Encontrar la primera dirección
            - N bits se mantienen | 32-N bits a 0
      - Encontrar última dirección
            - N bits se mantienen | 32-N bits a 1
- *Máscara*
      - Forma de anotar el prefijo, formas equivalentes
            - 11111111.11111111.11111111.00000000
            - 255.255.255.0
            - /24
            - número de direcciones del bloque N=NOT(máscara) + 1
            - *Primera dirección del bloque* = (Cualquier dirección del bloque) AND (máscara)
            - *última dirección del bloque* = (Cualquier dir del bloque) OR (NOT(Máscara))
- *Asignación de bloques*
      - *ICANN*, autoridad que asigna direcciones de red.
            - No a usuarios, sino a ISPs o grandes organizaciones.
            - El número de direcciones solicitadas debe ser potencia de 2.
            - *Primera dirección de un bloque* siempre es [ Prefijo | 0's ].
                  - Identifica la red, no se asigna a hosts.
- *Subnetting*
      - Se puede dividir un rango de direcciones en varios subrangos (ampliando el Prefijo).
      - Una subred puede dividirse en más subredes (siempre de tamaño potencia de 2).
            - $n_{prfj} = 32 - log_2(n_{rdes})$

- *Direcciones especiales*
      - *Dirección de máquina host*, 0.0.0.0/32
      - *Dirección de difusión limitada*, 255.255.255.255/32
            - Paquete a todos los nodos de la red, pero no sale de la red.
            - Enrutadores bloquean la salida.
      - *Dirección de loopback*, 127.0.0.0/8. nunca sale del host
            - localhost
      - *Direcciones privadas*, 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 y 169.254.0.0/16
            - ver *NAT*
      - *Direcciones multidifusión*, 224.0.0.0/4
            - Reservado a direcciones multicast.

** Protocolo de configuración de host dinámico (DHCP)
- Es un programa de nivel aplicación que utiliza el paradigma cliente/servidor.
- También conocido como protocolo *plug and play*.
- Se configura para asignar direcciones IP permanentes o móviles a dispositivos.
- Un equipo necesita saber, el servidor DHCP los puede proporcionar.
      - Su dirección IP
      - prefijo de la red
      - dirección del enrutador
      - la dirección del DNS
- *Formato DHCP*
      - *Opcode* (8 Bit), tipo de solicitud
      - *HType* (8 Bit), tipo de hardware
      - *HLen* (8 Bit), Longitud de la dirección de hardware
      - *HCount* (8 Bit), número máximo de saltos
      - *ID de transacción* (32 Bit), número aleatorio establecido por el cliente
      - *Tiempo Transcurrido* (16 Bit), en segundos
      - *Flags* (16 Bit), primer bit 0 unicast 1 milticast
      - *Dirección del cliente* (32 Bit), 0 si el cliente no lo sabe
      - *Dirección del servidor* (32 Bit), Una dirección IP de transmisión si el cliente no lo sabe.
      - *Dirección IP de la puerta de enlace* (32 Bit), Dirección del enrutador por defecto.
      - *Dirección del hardware del cliente* (48 Bit), la MAC del cliente
      - *Nombre del servicor* (64 Bytes), nombre de dominio
      - *Nombre del archivo de inicio* (128 bytes), información adicional.
      - *Opciones* (64 bytes), 
- *Proceso*
      1. El host crea un mensaje DHCPDISCOVER con el valor de *ID de transacción*.
             - Datagrama de usuario UDP
             - Puerto origen 68, Puerto destino 67
             - *Dirección cliente* 0.0.0.0
             - *Dirección servidor* 255.255.255.255 (difusión amplia)
      2. Servidor DHCP responde con DHCPOFFER
             - La respuesta por difusión
             - Puerto origen 67, puerto destino 68
             - *Direccion cliente* la IP ofrecida
             - *Dirección servidor* su propia IP
             - Incluye el tiempo de alquiler de la IP
      3. El host que se une recibe una o varias ofertas y elige una.
             - Envía DHCPREQUEST al servidor del cual aceptó la oferta.
             - Con los valores conocidos rellenados.
      4. El servidor responde al cliente con DHCPACK si la dirección ofrecida es válida.
             - En casocontrario responde con DHCPNACK.
- El servidor no entrega toda la información en su respuesta DHCPACK
      - Define una ruta a un archivo con la información completa.
      - El cliente puede usar *FTP* para encontrar este archivo.
- *Control de errores*
      - Requiere que UDP use la suma de comprobación.
      - Temporizadores
            - DHCP obliga al cliente a usar un número aleatorio para establecer su temporizador.

** Resolución de direcciones (NAT)
- Permite el uso de direcciones privadas en una red y al menos una global para internet (el enrutador). Para Internet solo existe el enrutador.
      - El router ejecuta el software NAT.

*** *Traducción de la dirección*
- Todos los paquetes de salida pasan por el enrutador NAT.
      - Sustituye la dirección origen por la del enrutador NAT.
- Todos lo paquetes de entrada pasan por el enrutador NAT.
      - Sustituye la dirección destino (enrutador NAT) por la del host privado.

*** Tabla de traducción
- El enrutador NAT suele terner almenos 4 direcciones globales.
      - 4 tablas
- Tabla con *Direcciones IP y número de puerto*
      - Para eliminar ambigüedad.
      - Ejemplo dos hosts acceden al mismo servidor.
        | Dir. Privada | Puerto Privado | Dirección externa | Puerto externo | Protocolo Transporte |
        |--------------+----------------+-------------------+----------------+----------------------|
        |   172.18.3.1 |           1400 |          25.8.3.2 |             80 | TCP                  |
        |   172.18.3.2 |           1401 |          25.8.3.2 |             80 | TCP                  |

** Reenvío de paquetes IP
*** Reenvio basado en la dirección de salto
- Requeire de enrutadores con tabla de enrutamiento
- La tabla tiene la dirección de la red destino y el siguiente salto hacia ese destino.
  | Dirección/máscara de red | siguiente salto | Interfaz |
  |--------------------------+-----------------+----------|
  | 180.70.65.192/26         | --              | m2       |
  | 201.4.16.0/22            | --              | m1       |
  | Por defecto (internet)   | 180.70.65.200   | m2       |
- *Agregador de direcciones*
      - Todas las subredes que conectan con un enrutador A pueden tener una red común.
            - Redes en bloque.
      - Est simplifica a los enrutadores externos (B) la tabla de enrutación.
            - Porque todas las subredes de A son una entrada en el enrutador B.
- *Coincidencia con la máscara más larga*
      - Las entradas de la tabla de enrutamiento de redes con dirección más larga tienen preferencia.
            - Las redes más pequeñas y más concretas (menos agrupación de subredes) tienen preferencia en los datos de enrutamiento.
- *Encaminamiento jerárquico*
      - Para evitar tablas gigantescas puede organizarse la red en una estructura de árbol de subredes.
            - Cada nodo puede ser un enrutador de un ISP.
- *Encaminamiento geográfico*
      - Extensión del encaminamiento jerárquico.
      - Se dividen el espacio de direcciones en continentes por ejemplo.

- Algoritmos de búsqueda de la tabla de encaminamiento
      - Se puede estructurar la tabla en un /tie/ para mejorar la eficiencia.

*** Encaminamiento basado en etiqueta
- Enfocado a la conexión
- Uso de *Circuito Virtual*
- *Conmutación de etiquetas multiprotocolo (MPLS)*
      - El enrutador se puede comportar como un enrutador o como un conmutador
            - Como enrutador, reenvia basándose en la dirección destino.
            - Como conmutador, reenvia basándose en la etiqueta.
      - Hace falta añadir la etiqueta para el servicio orientado a la conexión (circuito virtual).
      - IPV4 no soporta esta ampliación
            - Solución: Se encapsula todo el paquete IP como un paquete MPLS como carga útil (es un poco usar el nivel aplicación).
            - Se agrega una cabecera MPLS.
      - IPV6 sí soporta esta ampliación
      - *Cabecera MPLS*
            - *Etiqueta* (20 Bits)
            - *Exp* (3 Bit), fines experimentales.
            - *S* (1 Bit), 1 cabecera la última de la pila.
            - *TTL* (8 Bit), Saltos máximos (-1 en cada salta hasta 0).

** Protocolos de nivel de Red
*** Protocolo de internet (IP)
- IPV4, protocolo sin conexión

**** Formato de datagrama (20 - 60 Bytes)
- *Versión* (4 Bits), valor 4
- *HLEN* (4 bits), longitud de la cabecera en palabras de 4 bytes.
- *Tipo de servicio* (8 Bit), TOS.
- *Longitud total* (16 Bit), cabezera + datos en bytes.
- *Identificación* (16 Bit), Relacionado con la fragmentación.
      - Junto a la ip de origen identifica el datagrama de forma única
- *Flags* (3 Bit), Relacionado con la fragmentación.
- *Desplazamiento de la fragmentación* (13 Bit), Relacionado con la fragmentación.
      - Desplazamiento respecto al datagrama original medido en unidades de 8 bytes.
- *TTL (Tiempo de vida)* (8 Bit), Contador de saltos para evitar bucles.
- *Protocolo* (8 Bit), protocolo del nivel de transporte (TCP, UDP SCTP).
      - Así se identifica a quien se le debe entregar.
- *Suma de control de encabezado* (16 Bit), comprueba la integridad del paquete.
      - Como algunos campos pueden cambiar en el trayecto (TTL) la suma de control se recalcula en cada salto.
- *Dirección IP fuente* (32 Bit)
- *Dirección IP destino* (32 Bit)
- *Opciones + relleno* (0 to 40 Bit), las implementaciones deben ser capaces de manejar este campo. Sobretodo para depuración.
- *Carga útil*, El contenido.

*** Fragmentación
**** MTU, Unidad de transferencia máxima
- Cada protocolo de trama (nivel de enlace) tiene un tamaño máximo.
- *MTU*, longitud máxima de la carga útil de la *trama* (ojo de la trama).
- *Fragmentación*, dividir el datagrama para que entre en tramas de tamaño menores.
- Enrutadores pueden fragmentar.
- El ensamblado de los fragmentos se hace en el host destino.
- *Campos relacionados*
      - *Identificación*, Junto a la ip de origen identifica de forma única el datagrama.
            - El host origen lleva un contador que se va incrementado en cada datagrama.
      - *Flags*
            - #1#, no debe fragmentarse el datagrama
                  - Si no puede pasar se descarta y se envía un mensaje de error ICMP al origen.
            - ##1, el datagrama no es el último fragmento.
            - ##0, es el último fragmento del datagrama
      - *Desplazamiento de la fragmentación*, Desplazamiento respecto a los datos del datagrama original medido en unidades de *8 bytes*.
            - Si se fragmenta un fragmento sigue siendo relativo al datagrama original.
            - Notese que es sobre los datos, sobre la carga útil.
            - El primer fragmento se identifica por tener desplazamiento 0.
            - El tamaño del fragmento debe permitir que sea divisible por 8

*** Opciones
- Parte variable de la cabecera del datagrama.
 # TODO

*** Seguridad de los datagramas IPv4
- *Rastreo de paquetes*, Interceptar un paquete IP y hacer una copia del mismo.
      - Se intenta evitar el *packet sniffing* con la encriptación.
- *Modificación de paquetes*, Interceptar un paquete cambiar el contenido y reenviarlo a su destino.
      - Existen mecanismos de integridad de datos para su detección.
- *Falsificación de IP*, *Spoofing*, enviar un paquete modificando la IP de origen.
      - Parece que venga de otra persona.
      - Mecanismos de autentificación del origen.
- *IPSec*, protocolo
      - Se acuerdan algoritmos y claves entre los participantes de la IPSec.
      - *Cifrado de paquetes*, usando las claves y algoritmos acordados.
      - *Integridad de los datos*, Si el paquete no supera la prueba de integridad se descarta.
      - *Autenticación de origen*, Para asegurarse que no ha sido creado por un impostor.

*** ICMPv4
- Mensajes de control para notificar de errores y consultas sobre el estado de un servidor (enrutador o lo que sea).
- Se encapsulan dentro de datagramas IP

  # TODO
**** Mensajes
- *Cabecera*
      - *Tipo* (8 Bit)
      - *Código* (8 Bit)
      - *Suma de comprobación* (16 Bit)
      - de error *Resto del encabezado* (32 Bit)
      - de consulta
            - *Identificador* (16 Bit)
            - *N de secuencia* (16 Bit)
      - *Datos*
            - En error incluye el encabezado IP y algunos bytes adicionales.
                  - Incluye el numero de puerto
- *Mensajes de informe de error*
      - No corrige errores, tan solo informa de ellos.
      - Datagramas con dirección *multidifusión* o de *dirección especial* no generan ICMP de error.
      - No se genera ICMP de error ante un error en un mensaje ICMP.
      - En datagramas fragmentados solo se genera ICMP de error para el primer datagrama.
      - *Destino inalcanzable*, tipo 3.
      - *Silenciar origen*, tipo 4. Informa al remitente sobre la congestión de la red.
      - *Redirección*, tipo 5. Informa a la fuente que usó un enrutador equivocado.
      - *Tiempo excedido* tipo 11. TTL llegó a 0. Se envía a la fuente.
      - *Problemas con los parámetros*, tipo 12. Problemas en el encabezado de los datagramas.
- *Mensajes de Consulta*
      - Sondear, probar actividad, sincronizar relojes.

# TODO        

** IP de nueva generación (IPv6)
*** Representación
- Mayor espacio de direcciones, 128bit, 16bytes.
- Notación:
      - Binaria, 1111111011..1100000000
      - Hexadecimal de dos puntos, FEF6:BA98:7654:3210:ADEF:BBFF:2922:FF00
- Abreviaruta,
      - Omisión de 0's, 0074->74, 000F->F, 0000->0
      - Compreión de 0's, FDEC:0:0:0:0:BBFF:0:FFFF -> FDEC::BBFF:0:FFFF
            - Solo se puede aplicar una vez.
- una dirección IPv4 puede estar incrustada en una IPv6
      - los 32 bits más a la derecha
      - ..FF:192.168.1.131
- Usa notación CIDR, con prefijo y sufijo.
      - FDEC::BBFF:0:FFFF/60

*** Espacio de direcciones
- inagotable $2^{128}$

**** Dirección unicast
- Enviado a una única interfaz.

**** Dirección anycast
- Un grupo de nodos que comparte una dirección.
  El mensaje solo llega al nodo más accesible (solo a uno).

**** Dirección multicast
- Un grupo de nodos comparte una dirección.
  El mensaje llega a todos los nodos del grupo.

***  Asignación del espacio de direcciones
| CIDR      | Asignación de bloques               |
|-----------+-------------------------------------|
| 0000::/8  | Direcciones especiales              |
| 2000::/3  | unicast global, Unidifusión mundial |
| FC00::/7  | Unicast exclusivo local             |
| FE80::/10 | Direcciones de enlace locales       |
| FF00::/8  | Direcciones multidifusion           |

**** Direcciones Unicast global
- Direccion para comunicación entre hosts en la Internet.
- CIDR 2000::/3
- Tamaño del bloque $2^{125}$
- [ *prefijo de la ruta global* (empezando con 0010) (48 bit) |
   *Identificador de subredes* (16 bit) |
   *Identificador de la interfaz* (64 bit) ]
- Inclusión de la MAC en ipv6
      - Sobre el *Identificdor de la interfaz* (64 bit).
      - [ 3 Bytes MAC | 1..10 | 3 Bytes de MAC]
      - Primer byte de MAC #..#0# -> #..#1#

**** Direcciones Especiales
- CIDR 0000::/8
- Sin especificar 0000::/128, todo 0s. para DHCP cuando un host no conoce su IP.
- Loopback 0000::1/128
- Compatible 0000::/96, [todo 0s | Dir IPv4]
      - Emisor IPv6 envía un mensaje a un receptor IPv6
- Mapeada 0000::FFFF/96, [80 bit 0s | 16 bit 1s | Dir IPv4]
      - Emisor IPv6 envía un mensaje a un receptor IPv4

*** Autoconfiguración
- Prefijo local de enlace FE80::/10
- [ pref local enlace | 54 bit 0s | *Identificador de la interfaz* ]
      - El identificador de la interfaz lleva la MAC incrustada.
- El host que se autoconfigura debe comprobar que la dirección IPv6 es única.
      - Si el proceso falla el host necesitará otro proceso como DHCP
- Si el proceso es exitoso se almacena como dirección local de enlace.
- El router proporcionará la dirección unicast global si puede.

*** Protocolo de IPv6
**** Formato del paquete
- Cabecera (40 bytes)
      - *Versión* (4 Bit)
      - *Clase de tráfico* (8 Bit)
      - *Etiqueta del flujo* (8 Bit)
      - *Longitud de la carga* (16 Bit), en bytes
      - *Cabecera siguiente* (8 Bit), tipo de la siguiente cabecera de extensión
      - *Limite de salto* (8 Bit), como TTL en IPv4
      - *Direcciones origen* (128 Bit), 
      - *Dirección destino* (128 Bit),
      - *Carga útil*,  Cabeceras de extensión más datos

**** Cabecera de extensión
- [ Cabecera siguiente | Longitud | Cabecera extensión ]

*** Transición a IPv6
**** Doble pila
- Una estación ejecuta conjuntamente IPv4 y IPv6.

**** Túneles
- Ante una región solo compatible con IPv4, se encapsula el datagrama IPv6 en un datagrama IPv4.
- Al salir de la región se vuelve a IPv6

**** Traducción de cabeceras
- Un host no comprende IPv6 y un systema IPv6 se quiere comunicar con él.
- El router local puede traducir las cabeceras para hacerle llegar a los hosts datagramas IPv4.

* Nivel de Transporte
- *Paquete: datagrama de usuario*, segmentos o paquetes

** Servicios                                                         :ATTACH:
:PROPERTIES:
:ID:       a055fc28-fd74-4890-a5b4-559832fc9d15
:END:
- Responsable de la comunicación lógica entre aplicaciones.
- Da servicio al nivel de aplicación.
      - *Comunicación proceso a proceso*
            - El nivel transporte entrega el mensaje al proceso correcto.
- *Direccionamiento*
      - *número de puerto*, 16 bits entero unsigned.
      - *Dirección Socket*. ipv4:puerto
      - *puerto efimero*, puerto usado de forma temporal y breve (normalmente el cliente).
      - *Numeros de puerto bien conocido*, usualmente para servicios en un servidor.
- *Rangos ICANN*
      - *Puertos bien conocidos*, [0, 1023]
      - *Puertos registrados*, [1024, 49151]
            - Registrados en ICANN para evitar la duplicación
      - *Puertos dinámicos*, [49152, 65535]
            - Temporales o privados
- *Multiplexación*, una entidad acepta mensajes de más de una fuente.
- *Demultiplexación*, una entidad entrega a más de una fuente.
- *Control de flujo*
      - *push*, productor entrega a consumidor, consumidor puede verse abrumado.
      - *pull*, consumidor solicita la entrega al productor.
      - *buffers*
            - Uno en el nivel transporte del emisor.
                  - Si esta llena avisa al nivel aplicación para que detenga la producción.
            - Uno en el nivel transporte del receptor.
                  - Si esta llena avisa al nivel transporte del emisor para que detenga el flujo.
- *Control de errores*
      - *Números de secuencia*, identidicar el paquete o si es un duplicado.
            - Reconoce huecos y puede reordenar aunque llegue fuera de orden.
            - Depende de los bits disponibles.
                  - 4 bit el rango es [0,15]
      - *Confirmación*, un packete ACK por cada uno de los paquete recibidos.
            - El emisor tiene un temporizador para esperar un ACK antes de reenviar.
- *Ventana Deslizante*
      - La ventana se deslizante. cada entrada del buffer del emisor coincide con un número de secuencia
      - Cuando se envía un paquete con secuencia $i$ se marca en el buffer.
      - Cuando se recibe un ACK con secuencia $i$ se desmarca la entrada en el buffer.
      - La ventana se desliza hasta encontrar una entrada marcada al inicio de la ventana.
      - [[attachment:clipboard-20260126T115628.png]]        

*** Protocolos sin conexión y orientados a conexión
- *Servicio sin conexión*
      - Independencia entre los paquetes
      - No se conoce el orden de los paquetes
- *Servicio con conexión*
      - Relación entre los paquetes
      - Conexión lógica entre los participantes.
            1. Establecer conexión.
            2. Intercambio de datos.
            3. Desmantelar conexión.
               
*** Protocolos de nivel de transporte
**** Protocolo de parada y espera
- ARQ con parada y espera.
# TODO

**** Petición de respuesta automática con vuelta atrás N (GBN)
- ARQ GBN (go back n)
- *Números de secuencias* módulo de $2^m$.
      - $m$ bits del campo número de secuencia.
- Confirmación acumulativa.
- El número de ACK indica el siguiente paquete que se espera.
- *Ventana de envío*
      - Máximo tamaño ventana $2^m - 1$
            - $m$, bits del campo número secuencia.
- *Ventana de recepción*
      - Siempre es 1
      - Cualquier paquete fuera de orden se descarta.
- *Temporizadores*
      - Un solo temporizador
            - Asociado el primer paquete pendiente de confirmación.
- *Reenvio*
      - Cuando el temporizado expira se reenvian todos los paquetes pendientes.

**** Petición de respuesta automática con repetición selectiva
- ARQ con repetición selectiva (SR)
        
# comportamientos generales
# TODO

** Protocolo UDP
- *Protocolo de datagrama de usuario*
- Sin conexión y no fiable.
- Sencillo y con un mínimo de sobrecarga.

*** *paquete*: datagrama de usuario
- *Cabecera* (8 Bytes)
      - *Número de puerto de origen* (16 Bit)
      - *Número de puerto destino* (16 Bit)
      - *Longitud total* (16 Bit), en bytes
      - *Suma de comprobación* (16 Bit)

*** Servicios UDP
- *Comunicación proceso a proceso*
      - direcciones socket
- *Servicio sin conexión*
- *Control de flujo*, no hay control de flujo
- *Control de errores*, La suma de comprobación
      - pseudocabecera (procedente del nivel de red) + cabecera + datos
      - Si la suma de comprobación es todo 0's es que se ha decidido no calcularse.
      - El valor de la suma se complementa, si el complemento da todo 0's se vuelve a complementar para que sea todo 1's.
- No proporciona control de la congestión.
- Encapsula y desencapsula los mensajes del nivel de aplicación.
- Colas (buffers) asociadas a puertos.
- Multiplexación y demultiplexación

*** Aplicaciones UDP
- TFTP, SNMP, RIP, aplicaciones interactivas en tiempo real.

** TCP
*** Servicios TCP
- *Comunicación de proceso a proceso*
- *Servicio de flujo de entrega*, conexión imaginaria
- *Envio y recepción de buffers*, en el emisor y en el receptor.
      - útiles para el control de flujo.
- *Paquete: Segmentos*, agrupa los bytes en paquetes llamados segmentos.
      - No son necesariamente todos del mismo tamaño.
- *Comunicación full dúplex*
- *Multiplexación y demultiplexación*
- *Orientado a la conexión*
      1. Se establece una conexión lógica entre participantes
      2. Se intercambian datos
      3. Se cierra la conexión
- *Servicio fiable*
- *Encapsulado*

*** Características
**** Sistema de numeración
- Los segmentos se numeran usando dos campos.

- *Numero de secuencia*  
      - Número del byte respecto al mensaje original.
      - Se usa un número aleatorio entre $[0, 2^{32}-1]$ para el primer byte.
      - *Número de secuencia*.
            1. Número de secuencia del primer segmento (ISN) es aleatorio.
            2. De otro segmento es el Número de secuencia anterior más bytes trasportados por el segmento anterior.
- *Numero de confirmación*
      - Cada parte confirma los bytes que ha recibido (respecto al número de secuencia).
      - campo acumulativo.
            - Si envio $n$ he recibido correctamente hasta $n-1$.

*** Segmento
**** Formato (20 - 60 Bytes)
- *Dir puerto origen* (16 Bits)
- *Dir puerto destino* (16 Bits)
- *Número de secuencia* (32 Bits)
- *Número de confirmación* (32 Bits)
- *Longitud de la cabecera, HLEN* (4 Bits), número de palabras de 4 bytes.
- *Control* (6 Bits), 6 bits o flags.
      - URG, urgente
      - ACK, confirmación
      - PSH, petición de transmisión
      - RST, reiniciar conexión
      - SYN, sincronizar números de secuencia
      - FIN, terminar conexión
- *Tamaño de la ventana* (16 Bit), rwnd, receiver window, se establece por el receptor.
- *Suma de comprobación* (16 Bit), obligatorio en TCP
      - Se incluye incluye una pseudocabecera IP en la suma (direcciones ip)
- *Puntero urgente* (16 Bit), válido cuando el campo urgente es 1.
- *Opciones* (hasta 40 bytes).

*** Conexión TCP
**** Establecimiento de conexión
- *Negociación en 3 pasos*, three-way handshaking
      1. Cliente envía el primer segmento con SYN activo.
             - Sincroniza número de secuencias (*ISN* número de secuencia inicial).
             - Sin datos pero consume número de secuencia (1byte).
      2. Servidor envía SYN + ACK activos.
             - Inicia el número de secuencia del servidor.
             - Acusa el recibo del segmento SYN del cliente.
             - se incluye el rwnd para que lo use el cliente.
             - Como juega el papel de segmento SYN consume 1 número de secuencia.
      3. El cliente envía un segmento ACK
             - Si no lleva datos no consume número de secuencia.
- *Ataque por SYN masivo*
      - Ataque basado en iniciar muchas conexiones con el servidor para que sature sus recursos.
- *Ataque por denegación de servicio*
      - El atacante satura al servidor con peticiones de servicio.

**** Transferencia de datos
- Transmisión bidireccional.
- Pueden vijar datos junto a acuses de recibo (*piggybacking*).
- *Entrega inmediata de datos (pushing)*
      - la aplicación emisor puede solicitar a su TCP una operación PUSH.
      - TCP emsisor crea un segmento y lo envía inmediatamente con el bit PSH activo.
      - El TCP receptor sabe que debe entregarlo rápidamente a la aplicación.
- *Datos urgentes*
      - El TCP emisor emite inmediatamente con la flag URG activada.
      - El campo puntero urgente marca el final de los bytes urgentes.
            - El primer byte urgente es el inicio del mensaje.
      - La aplicación receptor es quien maneja estos bytes.

**** Fin de la conexión
- Cualquier parte puede cerrar la conexión.
- *Negociación en 3 pasos*
      1. Se envía un segmento FIN con el flag FIN activo.
             - Consume número de secuencia (hay que acusarlo de recibo).
      2. El servidor TCP informa a su proceso y envía un segundo segmento FIN + ACK.
             - Confirma la recepción y anuncia el cierre en sentido contrario.
             - Consume almenos 1 número de secuencia.
      3. El cliente envía el último ACK para confirmar la recepción.
- *Semicierre*
      - Un extremo deja de enviar datos mientras sigue recibiendo.
      - El participante A envía un segmento FIN
            - El participante B puede seguir enviando datos si le quedan pendientes.
            - A solo puede devolver ACK.
            - B envia un segmento FIN cuando haya concluido y A lo confirmará con un ACK.
- *Reinicio de la conexión*
  - Negar una solicitud de conexión, abortar una conexión existente o terminar una conexión inactiva. Todo esto con la flag RST.

*** Estados TCP
- *Cerrado*, no existe conexión.
- *Escuchar*, esperando SYN.
- *SYN-ENV*, SYN enviado, esperando ACK
- *SYN-REC*, SYN + ACK enviado, esperando ACK
- *ESTABLECIDO*, transferencia de datos en curso.
- *FIN-ESPERA1*, Primer FIN enviado, esperando ACK
- *FIN-ESPERA2*, ACK al primer FIN recivido, esperando segundo FIN
- *CERRADO-ESPERA*, Primer FIN recibido, ACK enviado.
- *TIEMPO-ESPERA*, Segundo FIN recibido, ACK enviado, esperando el tiempo límite 2MSL
- *ÚLTIMO-ACK*, Segundo FIN enviado, esperando ACK
- *CIERRE*, ambos lados decidieron cerrar simultáneamente.
  
*** Ventanas en TCP
**** Ventana de envío
- Tamaño de la ventana es el número de bytes.
      - El tamaño lo anuncia el receptor.
- Se utiliza un solo temporizador.

**** Ventana de recepción
- Se permite que el proceso de recepción extraiga datos a su propio ritmo.
- Tamaño de la ventana de recepción es menor o igual al tamaño del buffer.
- rwnd = tamaño buffer - bytes en espera de ser extraidos.
- Confirmación acumulativa.

*** Control de flujo
- TCP receptor controla a TCP emisor.
      - TCP emisor controla a proceso emisor.
- Las ventanas tienen una función reguladora.

**** Sindrome de la ventana Tonta  
# TODO

*** Control de errores
**** Sumas de comprobación
- Campo CRC obligatorio, si un segmento está corrompido se desecha

**** Confirmación
- ACK, a todo tipo de segmento que consuma número de secuencia
      - ACK no consume número de secuencia.
- Tipos de ACK
      - *Acuse de recibo acumulativo* (ACK), Se anuncia el siguiente byte que es espera recibir, siempre habiendo confirmado los anteriores.
      - *Reconocimiento selectivo* (SACK), Es una implementación más moderna.
            - Informa de un bloque de bytes desordenado y de bloques de bytes duplicados.
            - No sustituye al ACK.
            - Se implementa como opción en el TCP.
- *Generar confirmaciones*
      - Usar Piggybacking para reducir el tránsito.
      - Retraso del ACK, así puede que confirme varios de golpe.
            - Habiendo recibido los paquetes esperados no conviene alargar más de dos paquetes seguidos sin confirmar.
      - Si llega un paquete fuera de orden más alto del esperado, se envía un ACK con el número de secuencia esperado.
      - Cuando llega un segmento que falta se informa inmediatamente con un ACK el siguiente número esperado.
      - Si llega un segmento duplicado se descarta y se envía un ACK con el número de secuencia esperado.

**** Retransmisión
- Cuando se envía un segmento se almacena en una cola hasta que es confirmado.
- Se agrega un temporiador, si expira el segmento se reenvia.
      - Si recibe 3 ACK duplicados para el primer segmento de la cola también.
- *Retransmisión después de un plazo de retransmisión (RTO)*
      - retransmission time out (RTO)
      - Se tiene un RTO por cada conexión
      - Si el RTO vence se reenvía el segmento primero de la cola.
            - Se reinicia el RTO
- *Retransmisión después de tres segmentos ACK duplicados*
      - Si se reciben 3 ACK para el primer elemento de la cola, este se retransmite y se reinicia el RTO.
- *Segmentos fuera de orden*
      - No se descartan, se almacenan en el buffer del TCP
      - No se entregan al proceso, tan solo se entrega cuando la secuencia está sin huecos.

**** Control de la congestión del TCP
- *Ventana de congestión*
      - A persar del valor del /rwnd/ los routers intermedios pueden congestionarse.
      - *cwnd*, Relacionada con la congesitón de la red.
            - Tamaño real de ventana = /min(rwnd, cwnd)/
- *Detección de la congestión*
      - Signos, tiempo de espera sin ACK (congestión fuerte) y la aparición de 3 ACK (congestión ligera).
- *Políticas de congestión*
      - *inicio lento: incremento exponencial*
            - el /cwnd/ comienza con un MSS (tamaño de segmento máximo), se incrementa en 1 MSS cada vez que recibe un ACK.
                  - Como recibe más ACK crece más rápido por eso es exponencial.
            - Si llega un ACK, /cwnd = cwnd + 1/
            - *ssthresh*, variable humbral máximo de crecimiento.
      - *Evitación de la congestión: incremento aditivo*
            - Se incremente el /cwnd/ cada vez que una ventana completa es confirmada.
            - Una ventana es el número de segmentos emitido durante 1 RTT.
            - Si llega un ACK, /cwnd = cwnd + (1/cwnd)/
            - Se incrementa hasta detectar congestión
      - *Recuperación rápida*
            - Si llega un ACK duplicado, /cwnd = cwnd + 1/
- *Transición de la política*
      - *TCP tahoe*, antiguo.
            - Usaba inicio lento y evitaicón de la congestión.
            - Ante 3 ACK duplicados o expiración del temporizador.
                  - ssthresh = cwnd/2
                        - Se puede incrementar si se llega a un alto /cwnd/.
                  - cwnd = 1
      - *TCP reno*, el más común.
            - Se implementa recuperación rápida.
            - FSM
                  - *Inicio lento* (inicio)
                        - Expiración: ssthresh=cwnd/2; cwnd=1
                        - Llega ACK: cwnd=cwnd+1;
                        - cwnd >= ssthresh -> [Evitación de la congestión]
                        - 3 dupACK: ssthresh=cwnd/2;cwnd=ssthresh+3 -> [Recuperación rápida]
                  - *Evitación de la congestión*
                        - Llega ACK: cwnd = cwnd + (1/cwnd)
                        - Expiración: ssthresh=cwnd/2; cwnd=1; -> [Inicio lento]
                        - 3 dupACK: ssthresh=cwnd/2; cwnd=ssthresh+3; -> [Recuperación rápida]
                  - *Recuperación rápida*
                        - Llega 1 dupACK: cwnd=cwnd+1;
                        - Llega ACK: cwnd=ssthresh; -> [Evitación de la congestión]
                        - Expiración:ssthresh=cwnd/2;cwnd=1; -> [Inicio lento]
      - *Nuevo TCP Reno*
            - Nueva versión
- *Tasa de transferencia Efectiva*
      - /Tasa de transferencia (throughput) = (0.75)/ $W_{max}/RTT$
            - $W_{max}$, promedio de los tamaños de ventanas cuando se produce la congestión.

**** Temporizadores TCP
- *Temporizador de transmisión*
      - tiempo de espera para la retransmisión (RTO)
      - Cuando TCP envía el siguiente segmento delante de la cola de envío, inicia el temporizador.
      - Cuando expira, reenvía el primer segmento de la cola, reinicia el temporizador.
      - Segmentos son reconocidos de forma acumulativa, son purgados de la cola.
      - Si la cola está vacía detiene el temporizador.
- *Temporizador de ida y vuelta (RTT)*
      - RTT, roundtrip time, tiempo de ida y vuelta.
      - RTT medio
        # TODO pag. 551
      - RTT suavizado
      - RTT desviación
      - Tiempo de retransmisión (RTO)
- *Temporizador de persistencia*
- *Temporizador Keepalive*
- *Temporizador TIME-WAT*

** SCTP
# TODO pag. 555

* Nivel de Aplicación
- Comunicación entre dos programas.
- No persta servicios a otros protocolos.
- Programadores pueden crear nuevos protocolos.

** Paradigmas del nivel de aplicación
*** Paradigma: cliente-servidor
- Proveedor de servicios es el programa servidor.
      - Se ejecutacontinuamente esperando al cliente.
      - Suele haber 1 o pocos servidores.
- El cliente establece la conexión con el servidor y pide el servicio.
      - Suelen haber muchos clientes.
      - Se conectan solo cuando necesitan el servicio.

*** Paradigma: entre pares
- No hay necesidad de un servidor
- La responsabilidad se comparte entre pares.
- Una computadora puede en un momento prestar servicio y en otro ser el cliente.
      - O al mismo tiempo también
- La seguridad es más complicada.
- No encaja con todas la aplicaciones.
- ejemplos: Bittorrent, Skype (en telefonía funciona bien).

*** Paradigma mixto
- El emparejamiento entre pares puede estar orquestado por un servidor.

** Programación Cliente-Servidor
*** Programación con Sockets
- El Socket es una abstracción, un objeto creado por el programa aplicación.
      - Se espera comunicación entre dos Sockets.
      - Dirección Socket: [ Dirección IP (32 Bit) | N. puerto (16 Bit) ]
      - El soquet lleva implícito en la creación el protocolo de nivel de transporte (UDP, TCP o SCTP).
- El proceso servidor (local) define el puerto de conexión. Sea bien conocido o uno nuevo.
      - Conoce la IP y el puerto del cliente cuando este inicia una conexión.
- El proceso cliente (remoto) conoce el la IP y el puerto del servidor (archivos de configuración por ejemplo).
      - Puede identificar al servidor por una URL y el acceso a un servidor DNS.

*** Comunicación iterativa usando UDP
- Iterativa es que maneja la solicitud de un cliente cada vez, dejando el resto de solicitudes en cola hasta que responda a la primera solicitud.
- Cliente y servidor usan 1 Socket cada uno.
      - El socket del cliente es efimero.
- diagrama de flujo
  | Clientes         | Servidor              | etiquetas |
  |------------------+-----------------------+-----------|
  |                  | (Comienza)            |           |
  |                  | Crea Socket           |           |
  |                  | Enlazar Socket        |           |
  | (Comienza)       | [ Bucle Infinito ]    |           |
  | Crea Socket      | Espera Solicitud      |           |
  | Enviar Solicitud | Recibe Solicitud      |           |
  | Espera Respuesta | Maneja Solicitud      |           |
  | Recibe Respuesta | Envía Respuesta       |           |
  | Maneja Respuesta | -> [ Bucle Infinito ] |           |
  | Destruye Socket  |                       |           |
  | (Para)           |                       |           |

- *Proceso servidor*
      - Apertura pasiva y espera una conexión de algún cliente.
      - Rellena el socket cliente con la conexión de este.
- *Proceso cliente*
      - Apertura activa, Crea el socket con los datos del servidor.

*** Comunicación iterativa usando TCP
- No es muy común en TCP
- El servidor utiliza 2 Sockets.
      1. Establecimiento de la conexión (Socket escucha).
      2. Transferencia de datos
- El cliente usa un solo Socket.
- diagrama de flujo
  | Clientes            | Servidor                 | notas                                    |
  |---------------------+--------------------------+------------------------------------------|
  |                     | (Comienza)               |                                          |
  | (Comienza)          | Crea Socket              |                                          |
  | Crea Socket         | Enlazar Socket           |                                          |
  | Conectar            | Escuchar (Socket esucha) | Forma la cola de clientes                |
  |                     | [Bucle Infinito]         | Cada iteración sirve a un cliente        |
  |                     | Aceptar                  |                                          |
  | Transferencia datos | Transferencia datos      | Se usa el Socket de Datos (Nuevo Socket) |
  | Gestiona Respuesta  | Gestiona Solicitud       |                                          |
  | Destrouye Socket    | Destruye Socket          | Destruye el socket de Datos              |
  | (Para)              | -> [Bucle Infinito]      |                                          |
  |                     |                          |                                          |

*** Comunicación simultánea
- Puede haber un conexión con un cliente por cada hilo.

** Protocolos  Estándar
*** World Wide Web y HTTP
- Distribuido y enlazado (hipertexto o hipermedia).
- Servicio distribuido en muchos sitios.
- Cada sitio almacena una o más páginas web.
      - Cada página web es un archivo con nombre y dirección.
      - página web compuesta tiene enlaces a otras páginas webs.
- *Cliente Web (navegador)*
      - partes
            - Controlador, recibe entradas del usuario.
            - Protocolos cliente, Accede a los documentos.
                  - HTTP, FTP
            - Intérpretes, Interpreta los documentos (pantalla).
                  - HTML, java o javascript
- *Servidor Web*
      - Apache.
      - Programa que sirve páginas web, se prorgaman para que sean muy eficientes.
- *URL (localizador uniforme de recursos)*
      - Identificador único (host, puerto y ruta) y protocolo.
      - /protocolo://host/ruta/
      - /protocolo:///host:puerto/ruta/
- *Documentos de la Web*
      - *Documentos estáticos*
            - Contenido fijo
            - HTML, XML, XSL, XHTML
      - *Documentos dinámicos*
            - Se crea en el servidor web cuando el navegador solicita el documento.
            - El contenido puede variar de una petición a otra.
      - *Documentos Activos*
            - Se necesita un programa o script que se ejecute en el sitio cliente.
            - javaScript se descarga y ejecuta en el sitio cliente.

**** Protocolo de transferencia de hipertexto (HTTP)
- Servidor HTTP usa el puerto 80
- Usa los servicios de TCP.
- *Conexión no persistente*
      - pasos
            1. El cliente abre la conexión y envía una solicitud.
            2. El servidor responde y cierra la conexión.
            3. Cliente lee los datos, encuentra el marcador fin de archivo y cierra la conexión.
      - Si un archivo contiene N enlaces la conexión se abre N+1 veces.
- *Conexión persistente*
      - El servidor deja la conexión abierta para más peticiones futuras.
            - Puede cerrar la conexión por tiempo o petición del cliente.
              
***** *Mensaje de petición*
- Formato
      - *línea de petición*: [ *Método* ][ ][ *URL* ][ ][ *Version* ][ret]
      - *Líneas de cabecera*: [ *Nombre de cabecera* ][:][ ][ *Valor* ][ret]
      - *línea en blanco*: [ret]
      - *Cuerpo*: [ *mensaje* ]
- *Métodos*
      - *GET*: Solicita un documento al servidor.
      - *HEAD*: Información sobre el documento, no el propio documento.
      - *PUT*: Envía un documento al servidor.
      - *POST*: Envía alguno información al servidor.
      - *TRACE*: Se hace eco de la colicitud entrante.
      - *DELTE*: Elimina la página web.
      - *CONNECT*: reservado
      - *OPTIONS*: Pregunta sobre las opciones disponibles.
- *Nombres de cabecera*
      - *User-Agent*: Identifica el programa cliente.
      - *Accept*: Muestra el formato de los medios que el cliente puede aceptar.
      - *Accept-Charset*: Muestra el conjunto de personajes que el cliente puede manejar.
      - *Accept-Encoding*: Muestra el esquema de codificación que el cliente puede manejar.
      - *Accept-Language*: Muestra el idioma que el cliente puede manejar.
      - *Authorization*: Muestra que permisos tiene el cliente.
      - *Host*: Muestra el número de host y de puerto del cliente.
      - *Date*: Muestra la fecha actual.
      - *Upgrade*: Especifica el protocolo de comunicación preferido.
      - *Coockie*: Devuelve la coockue al Servidor
      - *If-Modified-Since*: Si el archivo se modifico desde una fecha.

***** *Mensaje de respuesta*
- Formato
      - *línea de petición*: [ *Método* ][ ][ *Código estado*  ][ ][ *Frase* ][ret]
      - *Líneas de cabecera*: [ *Nombre de cabecera* ][:][ ][ *Valor* ][ret]
      - *línea en blanco*: [ret]
      - *Cuerpo*: [ *mensaje* ]
- *Nombres de cabecera*
      - *Date*: Muestra la fecha actual.
      - *Upgrade*: Especifica el protocolo de comunicación preferido.
      - *Server*: Da información sobre el servidor.
      - *Set-Cookie*: El servidor le pide al cliente que guarde una cookie.
      - *Content-Encoding*: Especifica el esquema de codificación.
      - *Content-Language*: Especifica el idioma.
      - *Content-Length*: Muestra la longitud del documento.
      - *Content-Type*: Especifica el tipo de medio.
      - *Location*: Pide al cliente que envíe la solicitud a otro sitio.
      - *Accept-Ranges*: El servidor aceptará los rangos de bytes solicitados.
      - *Last-modified*: Fecha y hora del último cambio.
        
***** Cookies
- Permite usar la web con estados.
- Implementación general
      1. El servidor guarda información sobe el cliente en un archivo o cadena de carácteres.
             - Esta información incluye a la cookie.
      2. El servidor incluye la cookie en la respuesta al cliente.
      3. El navegador del cliente almacena la cookie en un directorio de cookies.
             - Ordenado por nombre de servidor.
- Uso de cookies
      - El cliente incluye la cookie cuando se comunica con el servidor si la cookie existe en su directorio de cookies.

***** Almacenamiento en caché de web (Web Caching): servidores proxy
- Servidor proxy mantiene copias de las respuestas a peticiones recientes.
      1. Cliente solicita al servidor proxy
      2. Si el servidor proxy tiene el contenido lo ofrece
      3. Sino lo busca en el servidor correspondiente lo cachea y lo ofrece.
- Reduce la carga del servidor original.
      - Requiere de configuración con el cliente.
- Se suele ubicar un servidor proxy en el sitio del cliente.

*****  Seguridad HTTP 
- Puede ser ejecutado sobre SSL.
      - Se denomina HTTPS.


*** FTP
- Usa servicios TCP
- 2 conexiones, Control (puerto 21) y Datos (puerto 20)
- *Conexión de datos*
      1. El cliente inicia una apertura pasiva con un puerto efimero.
      2. El cliente envía la orden PORT con el número de puerto efímero por la conexión de control.
      3. El servidor recive el paquete y emite una apertura activa.
- *Tipos de archivo* que puede transmitir: ASCII, EBCDIC o binario.
- *Estructura de datos*
      - Estructura de archivo, flujo continuo de bytes.
      - Estructura de registros, el fichero se divide en registros y se emitem.
            - Solo archivos de texto.
      - Estructura de páginas, El archivo se divide en páginas.
            - Se pueden almacenar y acceder de forma aleatoria (y por tanto secuencial).
- *Modo de transmisión*
      - Modo flujo
      - Modo de bloque
      - MODO comprimido
- *Seguridad para el FTP*
      - SSL-FTP es la versión segura.

*** Correo electrónico
- Transacción de una sola dirección.

**** Arquitectura
- A y B están conectados por LAN o WAN a dos servidores de correo.
- El buzon es una parte del disco de cada servidor
- el servidor almacena un spool con los mensajes que esperan a ser enviados.
- Pasos A envía a B
      1. A usa un agente de usuario (UA).
      2. El cliente *MTA (agente de transferencia de mensajes)* de A (incluido en su UA) manda el mensaje al servidor MTA de A (En el servidor de correo de A).
      3. El servidor MTA de A pone el mensaje en una cola.
      4. El servidor De A tiene un cliente MTA que consulta la cola.
             - Cuando este cliente ve el mensaje lo manda al Servidor de B con el servicio de MTA B.
      5. El servicio MTA de B coloca el mensaje en los buzones del servidor B.
      6. Un servicio *MAA (agente de acceso a mensasjes)* en el servidor de B le ofrece los mensajes al cliente MAA de B (incluido en su UA).

- Agente UA
      - Interfaz para los usuarios.
- Direcciones
      - ParteLocal@Dominio
      - *ParteLocal*, define un archivo especial (buzón de usuario), donde se almacenan todos sus mensajes.
- MTA: protocolo SMTP
      - Simple mail transfer protocol
      - Puerto conocido 25
      - El que usa el MTA
      - *Ordenes*
        # TODO pag 658
      - Respuestas
        # TODO
      - *Fase de transferencia de correo*
            - Establecimiento de la conexión
                  1. El cliente inicia conexión y el servidor responde si está listo (código 220).
                  2. El cliente se identifica con un mensaje HELO y la dirección de su nombre de dominio.
                  3. El servidor responde con código 250 si todo OK.
            - Transferencia del mensaje
                  1. El cliente envía MAIL_FROM con el correo del remitente.
                  2. Servidor responde si está todo OK
                  3. Cliente envía RCTP_TO con el correo del destinatario.
                  4. Servidor responde si todo OK
                  5. Cliente envia DATA para iniciar la trasferencia.
                  6. Servidor responde con 354 si todo OK
                  7. Cliente envía el mensaje con las líneas consecutivas.
                  8. Servidor responde si todo OK
            - Terminación de la conexión
                  1. Cliente envía QUIT
                  2. Servidor responde 221, todo OK
- MAA: protocolo POP e IMAP
      - POP3
            - Servidor POP3 reside en el servidor de correo.
            - Cliente POP3 reside en la computadore receptora.
            - Descarga los correos desde el servidor de correo.
            - Dos modos de funcionamiento
                  - Borrado
                  - Mantenimiento
      - IMAP
            - Más completo que POP3
            # TODO pag 662

*** TELNET
- Registro remoto (TErminal NETwork).
- Muy poco seguro (se envía todo en texto plano).
- Actualmente se usa SSH.
- Funcionamiento
      1. El cliente accede haciendo el login remoto.
      2. Las teclas tecleadas se pasan al cliente TELNET y los transforma envaracteres de terminal virtual de red (NVT)
      3. Las órdenes viajan via TCP como texto hasta el servidor TELNET.
      4. TELNET escribe en el *controlador de pseudoterminales* e interactuacon el OS del servidor.
- *NVT*
      - Interfaz para homogeneizar las diferencias entre OS's.
      - Traduze carácteres y datos a formato NVT

*** SSH
- Secure Shell (SSH)
- Versión actual SSH-2
- *Componentes*
      - *SSH-TRANS*
            - Protocolo de nivel de transporte.
            - Hace TCP seguro
            - Cliente y Servidor intercambian parámetros para hacer el canal seguro.
            - Autentifica el servidor para el cliente.
      - *SSH-AUTH*
            - Autentifica el cliente para el servidor.
            - Similar a SSL (Secure Socket Layer).
                  - Cliente envía un mensaje con una solicitud.
                  - La solicitud incluye nombre del usuario, nombre del servidor, método de autentificación y datos necesarios.
                  - Servidor dice si todo OK.
      - *SSH-CONN*
            - Toma el canal seguro creado anteriormente y permite crear conexiones lógicas a partir de este.
            - Cada nuevo canal puede usarse para un propósito diferente.
- *Aplicaciones*
      - Registro Remoto
            - Por ejemplo OpenSSH, Putty
      - Transferencia de archivos
            - stfp (Secure file transfer protocol) o scp en UNIX
      - *Reenvio a Puerto*
            - También se conoce como Tunel SSH.
            - Crea un tunel seguro para otros protocolos.
- *Formato de los paquetes SSH*
      - *Longitud* (4 Bytes)
      - *Relleno* (1-8 Bytes)
            - Dificulta el desciframiento a atacantes.
      - *Tipo* (1 Byte)
      - *Datos* (variable)
      - *CRC* (4 Bytes)
            - Comprobar detección de errores.

*** DNS
- Sistema de asignación de nombres a direcciones.
- Protocolos TCP/IP usan direcciones IP.
- No se centralizan todos los mapeos en una sola computadora.
- *Espacio de nombres*
      - Deben  ser nombres únicos.
      - Se usa un espacio de nombres jerárquico.
            - Se construyen con un grafo tipo árbol.
            - Nodo raiz es la cadena vacía
            - Se compone de etiquetas (max 64 carácteres) separadas por puntos.
            - La etiqueta más a la derecha está más cerca de la raiz del árbol de nombres.
            - nombre.organización.naturaleza.
                  - algo.molon.com.                (FQDN)
                  - El punto final se puede omitir (PQDN)
- *Dominio*
      - El nombre de un dominio es el nombre del nodo superior de un subárbol.
      - Un dominio se puede subdividir en subdominios.
- *Distribución de nombres*
      - Servidores DNS, una jerarquía de servidores igual que la jerarquía de nombres.
      - *Zona*, sobre lo que un servidor DNS tiene autoridad.
            - Información detallada se almacena en los servidores de niveles inferiores.
      - *Servidor Raiz*, Delega autoridad a servidores inferiores.
            - Mantiene referencias a estos servidores.
            - Hay varios servidores raized distribuidos por el mundo.
- *Servidores primarios y secundarios*
      - *Servidor primario*, almacena un archivo sobre la zona para la que tiene autoridad.
      - *Servidor Secundario*, Transfiere la información completa sobre la zona desde otro servidor y almazena la copia en su disco local. La idea es crear redundancia.
      - Un servidor puede ser primario y secundario para dos zonas diferentes.
- *Dominios genéricos*
      - com, edu, net, gov
- *Dominios de países*
      - Dominios por países
      - es, fr, us
- *Resolución*
      - Convertir el nombre de dominio en una IP
      - *Resolución recursiva*
            - La consulta escala hasta la primera raiz común (servidor responsable) y desde aquí baja hasta el dominio consultado (servidor que forma parte del árbol).
      - *Resolución iterativa*
            - La consulta va primero al servidor raiz, este manda el siguiente paso donde puede estar la resolución del dominio.
            - Desde el host se vuelve a probar con el nuevo servidor y este puede enviar la solución o un nuevo servidor al que consultar.
- *Caché*
      - Los servidores hacen caché de las consultas para evitar la saturación de los recursos.
      - Se analiza periódicamente la cache.
- *Mensajes DNS*
      - *Consulta/Respuesta*
            - *Identificación* (16 Bit)
            - *Banderas* (16 Bit)
            - *Número de registros de preguntas* (16 Bit)
            - *Número de registros de respuestas* (16 Bit)
            - *Número de registros autorizados* (16 Bit)
            - *Número de registros adicionales* (16 Bit)
            - *Sección de preguntas*
            - *Sección de respuestas*
            - *Sección autorizada*
            - *Sección adicional*
- *Encapsulado*
      - Tanto UDP como TCP
      - puerto conocido 53
      - UDP para tamaño inferior a 512 bytes
      - TCP es más común
- *Registradores*
      - Verifica que el nombre es único y lo introduce en una base de datos DNS.
      - Se necesita el nombre del servidor y la dirección IP.
- *DDNS*
      - Maneja cambios sobre los registros DNS
- *Seguridad del DNS*
      - Es de los servicios más importantes.
      - Ataques
            - Un atacante puede espiar los nombres de los sitios y las ips de los sitios que más accede un usuario.
              Los mensajes DNS deben ser confidenciales.
            - Interceptar una respuesta DNS y cambiarla.
              Se previene con autenticación del mensaje o la integridad del mensaje.
            - Inundar y colapsar el servidor DNS, este tipo de ataque se previene denegando el acceso.
      - *DNSSEC*, sistema ideado por el IETF para proteger el DNS.
            - Se autentican los mensajes y la integridad de estos mediante un servicio denominado firma digital.

* Glosario
- *Paquete*, En una red informática es el bloque de datos en la comunicación entre dos extremos.
- *ISP*, proveedores de servicios de internet.
- *Puntos de peering*, puntos de intercambio directo entre dos o más redes independientes.
- *conmutador*, conmuta conexiones entre dispositivos de una misma red.
- *enrutador*, conecta redes diferentes y decide por donde van los datos.
- *modem*, Convierte señales.
- *TLS*, Saltos de enrutamiento máximos.
- *SSID*, nombre de una red inalámbrica.
- *RTT*, Round-Trip time, tiempo de envío de un paquete y llegada del ACK (TCP).
      - $RTT_M$,
      - $RTT_S$,
      - *Desviación RTT*, Calculo de la desviación RTT
- *RTO*, tiempo de retransmisión, se basa en el RTT suavizado y su desviación.
- *Señal Portadora*, Señal base entre el emisor y el receptor.
  La iformación digital se modula sobre esta señal.
- *Señal en Quadratura*, se tienen dos señales una en fase y la otra desfasada $\pi / 2$ aproximadamente.
      - Las dos señales actuan como señales portadoras independientes a la hora de modularlas.
      - Al combinar (sumar) las dos señales se crean 4 señales diferentes ($2^2$).
      - Se utiliza para mandar más bits en menos tiempo usando dos señales.
- *Protocolo sin conexión*, los paquetes se mandan de un nodo a otro sin relación entre ellas.
- *Protocolo orientado a conexión*, Se establece una conexión lógica entre los nodos,
  después se transmiten las tramas, que tienen alguna relación entre ellas.
- *FSM* (finite state machine), máquina de estados finita.
- *CRC*, cyclic redundancy check, se suele poner al final. Se calcula a partir del mensaje.
- *ACK*, acuse de recibo.
- *NAK*, mensaje de negación.
- *SONET*, Red óptica sincronizada.
- *OFDM*, Multiplexación por división de frecuencias ortogonal.

** Unidades
- Periodo y frecuencia
  | Periodo               |             | Frecuencia       |             |
  | Unidad                | Equivalente | Unidad           | Equivalente |
  |-----------------------+-------------+------------------+-------------|
  | Segundos (s)          | 1 s         | Herzio (Hz)      | 1 Hz        |
  | Milisegundos (ms)     | 10^{-3} s   | Kiloherzio (kHz) | 10^{3} Hz   |
  | Microsegundos (\mu s) | 10^{-6} s   | Megaherzio (MHz) | 10^{6} Hz   |
  | Nanosegundos (ns)     | 10^{-9} s   | Gigaherzio (GHz) | 10^{9} Hz   |
  | Picosegundos (ps)     | 10^{-12} s  | Teraherzio (THz) | 10^{12} Hz  |

* Fórmulas
- Capacidad Shanon, $Capacidad = B \cdot log_2(1 + SNR)$ tasa de datos (bps)
- $SNR_{dB} = 10 \cdot log_{10}(SNR)\ dB$
- $SNR_{dB}\ Cuantificacion=6.02n_b + 1.76$
      - $n_b$, bits necesarios para codificar los niveles.
- Tasa elementos señal, $S=c \cdot N \cdot 1/r = B_{min}$
      - $N$, tasa de datos (bps)
      - $S$, tasa de elementos señal
      - $r$, datos transportados por 1 elemento señal.
      - $c$, elemento caso, es una variable.
      - $B_{min}$, ancho de banda mínimo.
- Tasa Bits Muestro $= 2 \cdot B \cdot log_2(L)\ bps$
- $B_{BASK} = (1 + d)S\ Hz$
- $B_{BFSK} = (1+d)S + 2\Delta_f$
- $B_{BPSK}=B_{QPSK}=(1+d)S\ Hz$, pero $r_{bpsk}=1$ y $r_{qpsk}=2$.
- Tasa de productividad Aloha, $S=G \cdot e^{-2G}$
- Aloha con ranuras, $S_r = G \cdot e^{-G}$
- Tiempo transmisión CSMA/CD $T_{fr} = 2T_{p}$
- Retardo total de Red = $(n+1)(Retardo_{tr} + Retardo_{pg} + Retardo_{pr}) + (n)(Retardo_{qu})$
      - $n$, routers intermedios en la red.

* Recursos
- Link a los recursos del texto base.
   [[https://highered.mheducation.com/sites/0073376221/student_view0/chapter1/]]
      - 7 libro -> 9 web
      - 8 libro -> 11 web   
      - 9 libro -> 12 web

